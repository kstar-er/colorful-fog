"use strict";(self.webpackChunksystem=self.webpackChunksystem||[]).push([[6880],{18757:function(e,a,t){t.d(a,{V:function(){return l.V},o:function(){return o}}),t(57658);var l=t(81081);class o extends t(20566).Z{constructor({modules:e="",selectUri:a="/",deleteUri:t="/",selectOneUri:l="/",pageSize:o=20,tableHeader:r}={}){super({modules:e,selectUri:a,deleteUri:t,selectOneUri:l,pageSize:o,tableHeader:r})}async initData(e=this,a){var{data:t,code:o}=(await l.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===o&&(e.total=t.pageInfo.total,e.tableData.length=0,e.tableData.push(...t.pageInfo.list),a?.clearSelection())}currentPageChange(e,a=this,t){a.currentPage=e,a.initData(a,t)}pageSizeChange(e,a=this,t){a.currentPage=1,a.pageSize=e,a.initData(a,t)}search(e,a=this,t){a.searchData=e,a.currentPage=1,a.initData(a,t,!0)}forMatData(e,a){var t={MAIN:"主表",DETAIL:"明细"};return"type"!==e?a&&0<a.toString().length||"number"==typeof a?a:"-":t[a]||a}async getStructure(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/orderTable/select?currentPage=1&pageSize=1",{tableId:e}))["data"];return 200===e?{data:a,code:e}:t}async deleteStructure(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/orderTable/delete",e))["data"];return 200===e?{data:a,code:e}:t}async addStructure(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/orderTable/add",e))["data"];return 200===e?{data:a,code:e}:t}async addStructureBatch(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/orderTable/addBatch",e))["data"];return 200===e?{data:a,code:e}:t}async updateStructure(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/orderTable/update",e))["data"];return 200===e?{data:a,code:e}:t}async getDetail(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/tableFiled/select?currentPage=1&pageSize=10",{id:e.id}))["data"];return 200===e?{data:a,code:e}:t}async addTableField(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/tableFiled/addTableField",e))["data"];return 200===e?{data:a,code:e}:t}async addTableFields(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/tableFiled/addTableFieldList",e))["data"];return 200===e?{data:a,code:e}:t}async updateTableFiled(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/tableFiled/updateTableField",e))["data"];return 200===e?{data:a,code:e}:t}async addForeignKeys(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/ForeignKey/addBatch",e))["data"];return 200===e?{data:a,code:e}:t}async deleteForeignKeys(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/ForeignKey/delete",e))["data"];return 200===e?{data:a,code:e}:t}async getTable(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/orderTable/getTableNameByDataSourceId",e))["data"];return 200===e?{data:a,code:e}:t}}},51881:function(e,a){a.Z={name:"",key:"",policy:"eyJleHBpcmF0aW9uIjoiMzAyMi0wMS0wMVQxMjowMDowMC4wMDBaIiwiY29uZGl0aW9ucyI6W1siY29udGVudC1sZW5ndGgtcmFuZ2UiLDAsMTA0ODU3NjAwMF1dfQ==",OSSAccessKeyId:"LTAI5t7u1jzmji9stQ5LzCpe",success_action_status:"200",signature:"tF/dwb/qvoQjHffu0kq5FWQq9KY="}},36598:function(e,a,t){t.r(a),t.d(a,{default:function(){return D}}),t(57658);var l=t(73396),o=t(44870),r=t(87139),i=t(81081),d=t(44385),n=t(88490),s=t(6094),u=t(94666),c=t(12862),m=t(18757),p=t(22483),f=t(82261),g=t(51881);const h={class:"data-filter"},b={class:"extend-handle"},w={class:"extend-handle-left"},S=["id"],v={class:"jx-dialog-header"},y=["id"],T=(e=>((0,l.dD)("data-v-3be9ce98"),e=e(),(0,l.Cn)(),e))((()=>(0,l._)("h4",{class:"inline-block"}," 外键列表 ",-1)));a={__name:"structure",setup(e){const a=(0,p.tv)(),t=(0,p.yj)(),D=(0,l.Q2)("authority"),k=(0,o.iH)(g.Z),I=(0,l.FN)()["proxy"],C=(0,o.iH)(!1),x=(0,o.iH)(null),U=(0,o.iH)(!1),F=()=>{x.value=new m.o({modules:"structure",selectUri:"/colorful-fog/orderTable/select"}),x.value.initTableHeader(),x.value.initData(this,I.$refs.table)},E=((0,l.wF)((()=>{F()})),async()=>{A.value={},M.formInputEl[0].disabled=!1,M.isShow=!0}),$=async e=>{A.value=e,M.formInputEl[0].disabled=!0,M.formInputEl[1].disabled=!0,M.isShow=!0},_=e=>{x.value.search(e,this,I.$refs.table)},N=e=>e.admin?[(0,l.h)("div",{class:"table-handel-div no-options"},"暂无操作")]:[(0,l.h)("div",{class:"table-handel-div"},[(0,l.wy)((0,l.h)(f.ElButton,{class:"hover-animation",onClick:()=>{$(e)},title:"编辑",style:"padding:0;margin:0;background:transparent;width:80px;color:#0c81b1;margin-right:10px"},{default:()=>"编辑"}),[[D,"structure:update"]]),(0,l.wy)((0,l.h)(f.ElButton,{class:"hover-animation",onClick:()=>{P(e)},title:"删除",style:"padding:0;margin:0;background:transparent;width:80px;color:red;margin-right:10px"},{default:()=>"删除"}),[[D,"structure:update"]]),(0,l.wy)((0,l.h)(f.ElButton,{class:"hover-animation",onClick:()=>{H(e)},title:"更新明细",style:"padding:0;margin:0;background:transparent;width:80px;color:#0c81b1;margin-right:10px"},{default:()=>"更新明细"}),[[D,"structure:update"]]),(0,l.wy)((0,l.h)(f.ElButton,{class:"hover-animation",onClick:()=>{V(e)},title:"查看明细",style:"padding:0;margin:0;background:transparent;width:80px;color:#0c81b1;margin-right:10px"},{default:()=>"查看明细"}),[[D,"structure:check"]]),(0,l.wy)((0,l.h)(f.ElButton,{class:"hover-animation",onClick:()=>{z(e)},title:"外键列表",style:"padding:0;margin:0;background:transparent;width:80px;color:#0c81b1"},{default:()=>"外键列表"}),[[D,"structure:check"]])])];let K=null,B=(0,o.iH)(null);const z=e=>{B.value=e,B.value.foreignKeyList||(B.value.foreignKeyList=[]),U.value=!0},W=e=>{I.$alert("是否确认删除外键？","提示",{type:"info",icon:"InfoFilled",confirmButtonText:"确定",callback:a=>{"confirm"===a&&x.value.deleteForeignKeys([e.id]).then((e=>{200===e.code&&(M.isShow=!1,I.$message.success("删除成功"),x.value.initData(this,I.$refs.table),x.value.getStructure(B.value.id).then((e=>{B.value=e.data.pageInfo.list[0],j.isShow=!1,G.isShow=!1})))}))}})},H=e=>{e.id||0!==x.value.selections.length?(K=e,J("dataSource","update")):I.$message.error("请选择数据")},V=e=>{a.push(`/detail/strucitureDetail?id=${e.id}&orderTable=${e.orderTable}&title=`+t.meta.title)},A=(0,o.iH)({}),M=(0,o.qj)({isShow:!1,formInputEl:[{title:"选择数据库表",key:"orderTable",element:"input",type:"dialog",rules:[{required:!0,message:"该项不能为空",trigger:"blur"}]},{title:"表名称",key:"orderTableName",element:"input",rules:[{required:!0,message:"该项不能为空",trigger:"blur"}]}],formSelectEl:[{title:"类型",key:"type",element:"radio",options:[{label:"主表",value:"MAIN"},{label:"明细",value:"DETAIL"}],rules:[{required:!0,message:"该项不能为空",trigger:"blur"}]}],formTextAreaEl:[{title:"备注",key:"comment",element:"input",type:"textarea"}],formTimeAndNumber:[],emitOpenDialog:e=>{J(e)},inputDone:e=>{e.dataSourceId=R,e.dataSourceName=Q,e.id?x.value.updateStructure([e]).then((e=>{200===e.code&&(M.isShow=!1,I.$message.success("更新成功"),x.value.initData(this,I.$refs.table))})):x.value.addStructure(e).then((e=>{200===e.code&&(M.isShow=!1,I.$message.success("新增成功"),x.value.initData(this,I.$refs.table))}))}}),j=(0,o.qj)({isShow:!1,formInputEl:[{title:"当前表",key:"tableName",element:"input",rules:[{required:!0,message:"该项不能为空",trigger:"blur"}],disabled:!0},{title:"当前表外键",key:"foreignKey",type:"dialog",element:"input",rules:[{required:!0,message:"该项不能为空",trigger:"blur"}]},{title:"关联表",key:"foreignTableName",element:"input",type:"dialog",rules:[{required:!0,message:"该项不能为空",trigger:"blur"}]},{title:"关联表外键",key:"relTableForeignKey",element:"input",type:"dialog",rules:[{required:!0,message:"该项不能为空",trigger:"blur"}]}],formSelectEl:[],formTextAreaEl:[],formTimeAndNumber:[],emitOpenDialog:e=>{},inputDone:e=>{I.$alert("是否确认提交？","提示",{type:"info",icon:"InfoFilled",confirmButtonText:"确定",callback:a=>{"confirm"===a&&(e.id?x.value.updateStructure([e]).then((e=>{200===e.code&&(M.isShow=!1,I.$message.success("更新成功"),x.value.initData(this,I.$refs.table))})):x.value.addStructure(e).then((e=>{200===e.code&&(M.isShow=!1,I.$message.success("新增成功"),x.value.initData(this,I.$refs.table))})))}})}}),q=()=>{A.value={tableId:B.value.id,tableName:B.value.orderTable},j.isShow=!0},L=({forMatValue:e})=>e,P=async e=>{e.id||0!==x.value.selections.length?I.$alert("是否确认删除？","提示",{type:"error",icon:"InfoFilled",confirmButtonText:"确定",callback:a=>{"confirm"===a&&(a=e.id?[e.id]:x.value.selections.map((e=>e.id)),x.value.deleteStructure(a).then((e=>{200===e.code&&I.$alert("删除成功","提示",{type:"success",icon:"InfoFilled",showCancelButton:!1,callback:()=>{x.value.initData(this,I.$refs.table)}})})))}}):I.$message.error("请选择数据")},Z=e=>e.map((e=>({orderTable:e["数据库表"],orderTableName:e["表名称"],dataSourceId:e["数据库ID"],dataSourceName:e["数据库"],type:"主表"===e["类型"]?"MAIN":"DETAIL",comment:e["备注"]}))),O=async e=>{e=await(new I.$DataTool).xlsx2DataObject(e.raw);let a=Z(e);I.$alert("是否确认导入？","提示",{type:"info",icon:"InfoFilled",confirmButtonText:"确定",callback:e=>{"confirm"===e&&x.value.addStructureBatch(a).then((e=>{200===e.code&&I.$alert("导入成功","提示",{type:"success",icon:"InfoFilled",showCancelButton:!1,callback:()=>{x.value.initData(this,I.$refs.table)}})}))}})};let R=-1,Q="";const J=async(e,a)=>{switch(e){case"dataSource":return G.useChoose=!1,G.chooseRow=e=>{"update"===a&&I.$alert("是否确认更新明细？","提示",{type:"info",icon:"InfoFilled",confirmButtonText:"确定",callback:a=>{"confirm"===a&&(a={tableNameList:K.orderTable?[K.orderTable]:x.value.selections.map((e=>e.orderTable)),dataSourceId:e.id},x.value.updateTableFiled(a).then((e=>{200===e.code&&I.$alert("更新成功","提示",{type:"success",icon:"InfoFilled",showCancelButton:!1,callback:()=>{x.value.initData(this,I.$refs.table)}})})))}}),G.isShow=!1},G.doSearch=e=>{G.dataSource.initData()},G.dataSource=new m.o({selectUri:"/colorful-fog/dataSource/list",tableHeader:[{label:"数据库名称",prop:"sourceName",width:200},{label:"数据库Code",prop:"sourceCode",width:200}],pageSize:10}),G.dataSource.forMatData=(e,a)=>e[a.property]??"-",G.dataSource.initData=async(e=G.dataSource)=>{var{data:a,code:t}=(await i.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===t&&(e.total=a.length,e.tableData=a)},await G.dataSource.initData(),void(G.isShow=!0);case"foreignTableName":return G.useChoose=!1,G.chooseRow=e=>{A.value.foreignTableId=e.id,A.value.foreignTableName=e.orderTable,I.$refs.dialogForm.updateDialogInput({foreignTableName:e.orderTable,foreignTableId:e.id}),G.isShow=!1,J("relTableForeignKey")},G.doSearch=e=>{G.dataSource.initData()},G.dataSource=new m.o({selectUri:"/colorful-fog/orderTable/select",tableHeader:[{label:"表名称  ",prop:"orderTable",width:200},{label:"备注",prop:"orderTableName",width:200},{label:"类型",prop:"type",width:200}],pageSize:10}),G.dataSource.forMatData=(e,a)=>e[a.property]??"-",await G.dataSource.initData(),void(G.isShow=!0);case"relTableForeignKey":case"foreignKey":return G.useChoose=!1,G.chooseRow=a=>{if("foreignKey"===e)A.value.foreignKey=a.field,I.$refs.dialogForm.updateDialogInput({foreignKey:a.field}),G.isShow=!1;else{let e={foreignKey:A.value.foreignKey,tableName:A.value.tableName,tableId:A.value.tableId,foreignTableName:A.value.foreignTableName,foreignTableId:A.value.foreignTableId,relTableForeignKey:a.field};I.$alert("是否确认提交？","提示",{type:"info",icon:"InfoFilled",confirmButtonText:"确定",callback:a=>{"confirm"===a&&x.value.addForeignKeys([e]).then((e=>{200===e.code&&(M.isShow=!1,I.$message.success("添加成功"),x.value.initData(this,I.$refs.table),x.value.getStructure(A.value.tableId).then((e=>{B.value=e.data.pageInfo.list[0],j.isShow=!1,G.isShow=!1})))}))}})}},G.doSearch=e=>{G.dataSource.initData()},G.dataSource=new m.o({selectUri:"/colorful-fog/tableFiled/select",tableHeader:[{label:"字段名",prop:"fieldName",width:200},{label:"字段key",prop:"field",width:200}],pageSize:10}),G.dataSource.searchData="relTableForeignKey"===e?{tableName:A.value.foreignTableName}:{tableName:A.value.tableName},G.dataSource.forMatData=(e,a)=>e[a.property]??"-",await G.dataSource.initData(),void(G.isShow=!0);case"orderTable":return G.useChoose=!1,G.chooseRow=e=>{G.isShow=!1,R=e.id,Q=e.sourceName,J("selectTable")},G.doSearch=e=>{G.dataSource.initData()},G.dataSource=new m.o({selectUri:"/colorful-fog/dataSource/list",tableHeader:[{label:"数据库ID",prop:"id",width:200},{label:"数据库名称",prop:"sourceName",width:200},{label:"数据库类型",prop:"sourceType",width:200}],pageSize:10}),G.dataSource.forMatData=(e,a)=>e[a.property]??"-",G.dataSource.initData=async(e=G.dataSource)=>{var{data:a,code:t}=(await i.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===t&&(e.total=a.length,e.tableData=a)},await G.dataSource.initData(),void(G.isShow=!0);case"selectTable":return void x.value.getTable(R).then((e=>{200===e.code&&(G.dataSource=new m.o({tableHeader:[{label:"数据库表",prop:"orderTable",width:200},{label:"表名",prop:"orderTableName",width:200},{label:"备注",prop:"comment",width:200}],pageSize:1e5}),G.chooseRow=e=>{I.$refs.dialogForm.updateDialogInput({comment:e.comment,orderTable:e.orderTable,orderTableName:e.orderTableName}),G.isShow=!1},G.dataSource.forMatData=(e,a)=>e[a.property]??"-",G.dataSource.tableData=e.data.filter((e=>e.orderTable)),G.dataSource.total=e.data.length,G.isShow=!0)}));default:return}},Y=()=>{window.location="https://jxwlapp.oss-cn-guangzhou.aliyuncs.com/excelTemplate/导入数据库表模板.xlsx?download"},G=(0,o.qj)({isShow:!1,dataSource:null,searchPlaceholde:"",doSearch:e=>{},chooseRow:e=>{}});return(e,a)=>{var t=(0,l.up)("el-upload"),i=(0,l.up)("el-tooltip");const p=(0,l.up)("CircleCloseFilled"),g=(0,l.up)("el-icon");var D=(0,l.up)("el-drawer");const F=(0,l.up)("el-table-column"),K=(0,l.up)("el-table");var z=(0,l.up)("el-dialog"),H=(0,l.Q2)("authorityHandle");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",h,[(0,l.Wm)(c.Z,{"filter-items":x.value.tableHeader,onSearch:_},null,8,["filter-items"])]),(0,l._)("div",b,[(0,l._)("div",w,[(0,l.wy)(((0,l.wg)(),(0,l.j4)((0,o.SU)(f.ElButton),{class:"handle-btn",color:"#4a78bd",style:{color:"#666"},plain:"",onClick:E},{default:(0,l.w5)((()=>[(0,l.Uk)(" 新增 ")])),_:1})),[[H,"structure:add"]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(t,{class:"inline-block ml10",accept:".xlsx, .xls","on-change":O,"show-file-list":!1,"auto-upload":!1},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(f.ElButton),{class:"handle-btn",color:"#4a78bd",style:{color:"#666"},plain:""},{default:(0,l.w5)((()=>[(0,l.Uk)(" 导入Excel ")])),_:1})])),_:1})),[[H,"structure:importExcel"]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)((0,o.SU)(f.ElButton),{class:"handle-btn-delete ml12",color:"#f56c6c",plain:"",style:{color:"#666"},onClick:P},{default:(0,l.w5)((()=>[(0,l.Uk)(" 删除 ")])),_:1})),[[H,"structure:delete"]]),(0,l.Wm)(i,{class:"box-item",effect:"dark",content:"下载导入模板",placement:"top"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,o.SU)(f.ElButton),{color:"#5f6368",style:{color:"#ffffff"},size:"small",icon:"Download",circle:"",onClick:Y})])),_:1})])]),(0,l.Wm)(u.Z,{ref:"table","need-end-handle":"","need-check-box":"","need-customize-cell-renderer":"","end-handle-width":400,total:x.value.total,"current-page":x.value.currentPage,"page-size":x.value.pageSize,"table-data":x.value.tableData,columns:x.value.tableHeader,loading:(0,o.SU)(m.V)&&!M.isShow&&!j.isShow&&!G.isShow&&!U.value,"default-end-handle":!1,"customize-end-handle":N,"for-mat-data":x.value.forMatData,"customize-cell-renderer":L,onSelectionChange:a[0]||(a[0]=e=>x.value.selectionChange(e,x.value,(0,o.SU)(I).$refs.table)),onRefresh:a[1]||(a[1]=e=>x.value.initData(x.value,(0,o.SU)(I).$refs.table)),onEditRow:$,onCurrentChange:a[2]||(a[2]=e=>x.value.currentPageChange(e,x.value,(0,o.SU)(I).$refs.table)),onSizeChange:a[3]||(a[3]=e=>x.value.pageSizeChange(e,x.value,(0,o.SU)(I).$refs.table)),onEditTableHeader:a[4]||(a[4]=e=>C.value=!0)},null,8,["total","current-page","page-size","table-data","columns","loading","for-mat-data"]),(0,l.Wm)(D,{modelValue:C.value,"onUpdate:modelValue":a[6]||(a[6]=e=>C.value=e),"show-close":!1},{header:(0,l.w5)((({titleId:e,titleClass:t})=>[(0,l._)("h4",{id:e,class:(0,r.C_)(t)}," 通过拖拽设置您喜欢的表头顺序 ",10,S),(0,l.Wm)((0,o.SU)(f.ElButton),{type:"danger",onClick:a[5]||(a[5]=e=>C.value=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"el-icon--left"},{default:(0,l.w5)((()=>[(0,l.Wm)(p)])),_:1}),(0,l.Uk)(" 关闭 ")])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(s.Z,{"is-show-edit-table-header":C.value,modules:"role"},null,8,["is-show-edit-table-header"])])])),_:1},8,["modelValue"]),(0,l.Wm)(z,{modelValue:U.value,"onUpdate:modelValue":a[8]||(a[8]=e=>U.value=e),"lock-scroll":"",title:"外键列表","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,top:"4%","destroy-on-close":""},{header:(0,l.w5)((({titleId:e,titleClass:t})=>[(0,l._)("div",v,[(0,l._)("div",{id:e,class:(0,r.C_)(t)},[T,(0,l.Wm)((0,o.SU)(f.ElButton),{class:"dialog-close-btn ml10",type:"success",onClick:q},{default:(0,l.w5)((()=>[(0,l.Uk)(" 新增外键 ")])),_:1})],10,y),(0,l._)("div",null,[(0,l.Wm)((0,o.SU)(f.ElButton),{class:"dialog-close-btn",type:"danger",icon:"CloseBold",circle:"",onClick:a[7]||(a[7]=e=>U.value=!1)})])])])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(K,{stripe:"",data:(0,o.SU)(B).foreignKeyList,border:"",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{prop:"foreignTableName",label:"关联表"}),(0,l.Wm)(F,{prop:"foreignKey",label:"外键"}),(0,l.Wm)(F,{prop:"tableName",label:"当前表"}),(0,l.Wm)(F,{fixed:"right",label:"操作",width:"120"},{default:(0,l.w5)((({row:e})=>[(0,l.Wm)((0,o.SU)(f.ElButton),{link:"",type:"danger",size:"small",onClick:a=>W(e)},{default:(0,l.w5)((()=>[(0,l.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"]),M.isShow?((0,l.wg)(),(0,l.j4)(d.Z,{key:0,ref:"dialogForm",width:"60%",loading:(0,o.SU)(m.V),"my-client":k.value,"form-data":A.value,"is-show":M.isShow,title:"请填写相关信息","form-input-el":M.formInputEl,"form-select-el":M.formSelectEl,"form-text-area-el":M.formTextAreaEl,"form-upload-el":M.formUploadEl,"form-time-and-number":M.formTimeAndNumber,onCloseDialog:a[9]||(a[9]=e=>M.isShow=!1),onEmitOpenDialog:M.emitOpenDialog,onInputDone:M.inputDone},null,8,["loading","my-client","form-data","is-show","form-input-el","form-select-el","form-text-area-el","form-upload-el","form-time-and-number","onEmitOpenDialog","onInputDone"])):(0,l.kq)("",!0),j.isShow?((0,l.wg)(),(0,l.j4)(d.Z,{key:1,ref:"dialogForm",width:"50%",loading:(0,o.SU)(m.V),"my-client":k.value,"form-data":A.value,"is-show":j.isShow,title:"请填写相关信息","form-input-el":j.formInputEl,"form-select-el":j.formSelectEl,"form-text-area-el":j.formTextAreaEl,"form-upload-el":j.formUploadEl,"form-time-and-number":j.formTimeAndNumber,onCloseDialog:a[10]||(a[10]=e=>j.isShow=!1),onEmitOpenDialog:J,onInputDone:j.inputDone},null,8,["loading","my-client","form-data","is-show","form-input-el","form-select-el","form-text-area-el","form-upload-el","form-time-and-number","onInputDone"])):(0,l.kq)("",!0),G.isShow?((0,l.wg)(),(0,l.j4)(n.Z,{key:2,ref:"dialogSearch","is-show-search-input":!1,"need-selection":G.useChoose,"append-table-style":{background:"#126f9e",color:"#fff",borderColor:"rgba(192, 192, 192,.5)"},width:"60%","search-input-placeholder":G.searchPlaceholde,"is-show":G.isShow,"data-source":G.dataSource,title:"选择数据",loading:(0,o.SU)(m.V),onCloseDialog:a[11]||(a[11]=e=>G.isShow=!1),onDoDialogSearch:G.doSearch,onChooseRow:G.chooseRow,onSubmit:G.submit},null,8,["need-selection","append-table-style","search-input-placeholder","is-show","data-source","loading","onDoDialogSearch","onChooseRow","onSubmit"])):(0,l.kq)("",!0)])}}};var D=(0,t(40089).Z)(a,[["__scopeId","data-v-3be9ce98"]])},6094:function(e,a,t){t.d(a,{Z:function(){return p}}),t(57658);var l=t(73396),o=t(44870),r=t(49242),i=t(87139),d=t(98249),n=t(40130),s=t(46623);const u={class:"container"},c={class:"drag-box"},m={class:"drag-btn"};a={__name:"dynamicHeader",props:{isShowEditTableHeader:{type:Boolean,default:!1},modules:{type:String,default:""},filterList:{type:Array,default:()=>[]}},emits:["updateCompleted"],setup(e,{emit:a}){const t=e,{_state:p,commit:f}=(0,s.oR)(),g=p.data[t.modules].defaultTableHeader,h=(0,o.qj)([]),b=(0,o.iH)(!1),w=((0,l.wF)((()=>{(h.length=0)===t.filterList.length?h.push(...p.data[t.modules].tableHeader):p.data[t.modules].tableHeader.forEach((e=>{t.filterList.includes(e.key)||h.push(e)}))})),e=>{b.value=!1}),S=()=>{n.T.confirm("重置之后保存的数据将会丢失，是否继续？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{h.length=0,h.push(...JSON.parse(JSON.stringify(g))),f(t.modules+"/updateTableHeader",h),n.T.alert("修改成功！刷新后生效","提示",{type:"warning",icon:"InfoFilled",confirmButtonText:"立即刷新",callback:e=>{a("updateCompleted"),location.reload()}}),a("updateCompleted")})).catch((()=>{}))},v=()=>{n.T.confirm("确认保存？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{0!==t.filterList.length&&p.data[t.modules].tableHeader.forEach((e=>{t.filterList.includes(e.key)&&h.push(e)})),f(t.modules+"/updateTableHeader",h),n.T.alert("设置成功！刷新后生效","提示",{type:"warning",icon:"InfoFilled",confirmButtonText:"立即刷新",callback:e=>{a("updateCompleted"),location.reload()}})})).catch((()=>{}))};return(e,a)=>{const t=(0,l.up)("el-tag"),n=(0,l.up)("el-checkbox");var s=(0,l.up)("el-button");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("div",c,[(0,l.Wm)((0,o.SU)(d.J),{list:h,"chosen-class":"chosen",group:"name","force-fallback":"true",animation:"500","fallback-tolerance":4,onStart:a[0]||(a[0]=e=>b.value=!0),onEnd:w},{default:(0,l.w5)((()=>[(0,l.Wm)(r.W3,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.key||e.prop,class:"item"},[(0,l.Wm)(t,{size:"large"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.title||e.label),1)])),_:2},1024),(0,l._)("div",null,[(0,l.Wm)(n,{modelValue:e.isFixed,"onUpdate:modelValue":a=>e.isFixed=a,label:"固定在左边",size:"large"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(n,{modelValue:e.isShow,"onUpdate:modelValue":a=>e.isShow=a,label:"是否展示",size:"large"},null,8,["modelValue","onUpdate:modelValue"])])])))),128))])),_:1})])),_:1},8,["list"])]),(0,l._)("div",m,[(0,l.Wm)(s,{type:"warning",onClick:S},{default:(0,l.w5)((()=>[(0,l.Uk)(" 重置 ")])),_:1}),(0,l.Wm)(s,{type:"primary",onClick:v},{default:(0,l.w5)((()=>[(0,l.Uk)(" 保存 ")])),_:1})])])}}};var p=(0,t(40089).Z)(a,[["__scopeId","data-v-4c5f22fa"]])}}]);