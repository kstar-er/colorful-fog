"use strict";(self.webpackChunksystem=self.webpackChunksystem||[]).push([[909],{12608:function(e,a,t){t.d(a,{V:function(){return l.V},o:function(){return r}}),t(57658);var l=t(81081),o=(a=t(20566),t(68521));class r extends a.Z{constructor({modules:e="",selectUri:a="/",deleteUri:t="/",selectOneUri:l="/",pageSize:o=20,tableHeader:r}={}){super({modules:e,selectUri:a,deleteUri:t,selectOneUri:l,pageSize:o,tableHeader:r})}async initData(e=this,a){var{data:t,code:o}=(await l.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===o&&(e.total=t.pageInfo.total,e.tableData.length=0,e.tableData.push(...t.pageInfo.list),a?.clearSelection())}currentPageChange(e,a=this,t){a.currentPage=e,a.initData(a,t)}pageSizeChange(e,a=this,t){a.currentPage=1,a.pageSize=e,a.initData(a,t)}search(e,a=this,t){a.searchData=e,a.currentPage=1,a.initData(a,t,!0)}forMatData(e,a){var t=e=>{var a=(new o.x).timeStamp2Time(Date.parse(new Date)).split("-");e=e.toString().split(".");return Number(a[1])-Math.abs(Number(e[0]))<=0&&(a[0]=a[0]-Math.abs(Number(a[1])-Math.abs(Number(e[0])))),a[0]+"-"+(Number(a[1])-Math.abs(Number(e[0])))+"-"+e[1]};switch(e){case"costTermFormula":var l=(new o.x).timeStamp2Time(Date.parse(new Date)).slice(0,7);return(new o.x).timeStamp2Time(Date.parse(l)+2592e6*a).slice(0,7);case"timeFormulaStart":case"timeFormulaEnd":return t(a);case"collectObject":return"BILL"===a?"汇总原始数据":"二次汇总";case"billType":return"COST"===a?"应收":"应付";default:return e&&a&&(-1!==e.indexOf("Time")||-1!==e.indexOf("Date"))?(new o.x).timeStamp2Time(a,"yyyy-MM-dd hh:mm:ss"):a&&0<a.toString().length||"number"==typeof a?a:"-"}}async addCollent(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/collectSchemeMain/add",e))["data"];return 200===e?{data:a,code:e}:t}async updateCollent(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/collectSchemeMain/update",e))["data"];return 200===e?{data:a,code:e}:t}async deleteCollent(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/collectSchemeMain/delete",e))["data"];return 200===e?{data:a,code:e}:t}async addCollectDetails(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/CollectSchemeDetail/addBatch",e))["data"];return 200===e?{data:a,code:e}:t}async updateCollectDetails(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/CollectSchemeDetail/update",e))["data"];return 200===e?{data:a,code:e}:t}async deleteCollectDetails(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/CollectSchemeDetail/delete",e))["data"];return 200===e?{data:a,code:e}:t}async getMainDetail(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/collectSchemeMain/select?currentPage=1&pageSize=1",{id:e}))["data"];return 200===e?{data:a,code:e}:t}async createCollect(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/collectSchemeMain/create",e))["data"];return 200===e?{data:a,code:e}:t}async createOneUser(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/collectSchemeMain/createOneUser",e))["data"];return 200===e?{data:a,code:e}:t}async createAndExport(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/collectSchemeMain/createAndExport",e))["data"];return 200===e?{data:a,code:e}:t}}},51881:function(e,a){a.Z={name:"",key:"",policy:"eyJleHBpcmF0aW9uIjoiMzAyMi0wMS0wMVQxMjowMDowMC4wMDBaIiwiY29uZGl0aW9ucyI6W1siY29udGVudC1sZW5ndGgtcmFuZ2UiLDAsMTA0ODU3NjAwMF1dfQ==",OSSAccessKeyId:"LTAI5t7u1jzmji9stQ5LzCpe",success_action_status:"200",signature:"tF/dwb/qvoQjHffu0kq5FWQq9KY="}},69517:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}}),t(57658);var l=t(73396),o=t(44870),r=t(87139),n=t(49242),s=t(29833),c=t(44385),i=t(88490),u=t(6094),d=t(94666),m=t(12862),p=t(12608),h=t(22483),f=t(82261),g=t(51881);a=e=>((0,l.dD)("data-v-4f433504"),e=e(),(0,l.Cn)(),e);const v={class:"data-filter"},w={class:"extend-handle"},b={class:"extend-handle-left"},S=["id"],y={class:"jx-dialog-header"},D=["id"],C=a((()=>(0,l._)("span",{class:"tips"}," 不填写筛选条件默认全导出！ ",-1))),T={class:"mt10"},k=a((()=>(0,l._)("span",{class:"filter-label"},"正在导出的账单：",-1))),_={class:"mt20"},U=a((()=>(0,l._)("span",{class:"filter-label"},"时间：",-1))),N={class:"mt20"},x=a((()=>(0,l._)("span",{class:"filter-label"},"账单所属人员：",-1))),M={class:"mt20"},E=a((()=>(0,l._)("span",{class:"filter-label"},"需要导出的账单：",-1))),V={class:"footer"};a={__name:"summaryPlan",setup(e){const a=(0,h.tv)();(0,h.yj)();const t=(0,o.iH)(!1),F=(0,l.Q2)("authority"),z=(0,o.iH)(g.Z),j=(0,l.FN)()["proxy"],I=(0,o.iH)(!1),H=(0,o.iH)(null),O=()=>{H.value=new p.o({modules:"summaryPlan",selectUri:"/colorful-fog/collectSchemeMain/select"}),H.value.initTableHeader(),H.value.initData(this,j.$refs.table)},$=((0,l.wF)((()=>{O()})),async()=>{G.value={},Q.isShow=!0});let W=e=>{var a=(new j.$DataTool).timeStamp2Time(Date.parse(new Date)).split("-");e=e.toString().split(".");return Number(a[1])-Math.abs(Number(e[0]))<=0&&(a[0]=a[0]-Math.abs(Number(a[1])-Math.abs(Number(e[0])))),a[0]+"-"+(Number(a[1])-Math.abs(Number(e[0]))).toString().padStart(2,"0")+"-"+e[1].toString().padStart(2,"0")};const B=async e=>{G.value={...e},G.value.timeFormula=[W(e.timeFormulaStart),W(e.timeFormulaEnd)],e=(new j.$DataTool).timeStamp2Time(Date.parse(new Date)).slice(0,7),G.value.costTermFormula=(new j.$DataTool).timeStamp2Time(Date.parse(e)+2592e6*G.value.costTermFormula).slice(0,7),Q.isShow=!0},P=e=>{H.value.search(e,this,j.$refs.table)},A=e=>e.admin?[(0,l.h)("div",{class:"table-handel-div no-options"},"暂无操作")]:[(0,l.h)("div",{class:"table-handel-div"},[(0,l.wy)((0,l.h)(f.ElButton,{class:"hover-animation",onClick:()=>{a.push("/detail/collectDetail?id="+e.id+"&title="+e.collectSchemeName+"&collectSchemeCode="+e.collectSchemeCode+"&collectObject="+e.collectObject)},title:"修改计划",style:"padding:0;margin:0;background:transparent;width:80px;color:#0c81b1;margin-right:10px"},{default:()=>"修改计划"}),[[F,"summaryPlan:add"]]),(0,l.wy)((0,l.h)(f.ElButton,{class:"hover-animation",onClick:()=>{Y(e)},title:"查看汇总账单",style:"padding:0;margin:0;background:transparent;width:100px;color:#0c81b1;"},{default:()=>"查看汇总账单"}),[[F,"summaryPlan:check"]]),(0,l.h)(s.Z,{title:"更多",needPerList:Z,onDoAction:a=>{K(e,a)}})])],L=e=>{var a={collectCode:R.collectSchemeCode};0!==ae.value.users.length&&(a.belongArchiveCode=ae.value.users),0!==ae.value.shceme.length&&(a.schemeCode=ae.value.shceme),ae.value.time&&(a.timeDto={endTime:Date.parse(ae.value.time[1]),startTime:Date.parse(ae.value.time[0])});let l=[];H.value.createAndExport(a).then((e=>{200===e.code&&(e.data.forEach((e=>{var a=e.schemeName;let t=["所属经销商Code","所属经销商名称","账单编码","账期"],o=["belongArchiveCode","belongArchiveName","billCode","costTerm"],r=["STRING","STRING","STRING","STRING"],n=[];e.billResultVO.resultNameList.forEach((a=>{t.push(a.resultName),o.push(a.resultCode),r.push({data:e.dataType,decimal:a.decimal})})),e.billResultVO.resultDataList.list.forEach((e=>{e={...e,...e.data};let a=[];o.forEach(((t,l)=>{"DATE"===r[l].type?a.push((new j.$DataTool).timeStamp2Time(+e[t],"yyyy-MM-dd hh:mm:ss")):"NUM"!==r[l].type||Number.isNaN(Number(e[t]))?"NULL"===e[t]?a.push("-"):a.push(e[t]):a.push({v:Number(e[t]),t:"n",z:"0."+new Array(r[l].decimal??2).fill(0).join("")})})),n.push(a)})),l.push({title:a,header:t,style:{},data:n})})),(new j.$DataTool).complexExcel(l,"汇总数据"),t.value=!1)}))},K=(e,a)=>{switch(a){case"exportNewData":{let a=new p.o({selectUri:"/colorful-fog/CollectSchemeDetail/select",pageSize:2e3});return a.searchData={collectSchemeCode:e.collectSchemeCode},void a.initData().then((l=>{ne.length=0,a.tableData.reduce(((e,a)=>(e.includes(a.schemeCode)||(ne.push({value:a.schemeCode,label:a.schemeName}),e.push(a.schemeCode)),e)),[]),t.value=!0,R={...e},ae.value={users:[],shceme:[]}}))}case"add":return void B(e);case"delete":return void X(e);case"create":return void q(e);case"createShop":return void j.$prompt("请输入商家Code","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((({value:a})=>{a={collectSchemeCode:e.collectSchemeCode,belongArchiveCode:a},H.value.createOneUser(a).then((e=>{200===e.code&&j.$message.success("创建成功")}))})).catch((()=>{}))}};let Z=[{per:"summaryPlan:add",label:"编辑",command:"add"},{per:"summaryPlan:delete",label:"删除",command:"delete"},{per:"summaryPlan:create",label:"生成汇总账单",command:"create"},{per:"summaryPlan:create",label:"创建商家汇总账单",command:"createShop"},{per:"summaryPlan:create",label:"导出实时账单",command:"exportNewData"}];const q=e=>{j.$alert("是否确认生成汇总数据？","提示",{type:"error",icon:"InfoFilled",confirmButtonText:"确定",callback:a=>{"confirm"===a&&H.value.createCollect({code:e.collectSchemeCode}).then((e=>{200===e.code&&(Q.isShow=!1,j.$message.success("生成成功"),H.value.initData(this,j.$refs.table))}))}})};let R=(0,o.qj)({});const Y=e=>{a.push("/financial/SummarizeData?collectSchemeCode="+e.collectSchemeCode+"&name="+e.collectSchemeName+"&collectObject="+e.collectObject)},G=(0,o.iH)({}),Q=(0,o.qj)({isShow:!1,formInputEl:[{title:"汇总计划名称",key:"collectSchemeName",element:"input",rules:[{required:!0,message:"该项不能为空",trigger:"blur"}]}],formTimeAndNumber:[{title:"账期",key:"costTermFormula",element:"date",rules:[{required:!0,message:"该项不能为空",trigger:"blur"}],type:"month"},{title:"账单生成时间",key:"timeFormula",element:"daterange"}],formSelectEl:[{title:"汇总类型",key:"collectObject",element:"radio",options:[{label:"二次汇总",value:"COLLECT"},{label:"汇总原始账单",value:"BILL"}],rules:[{required:!0,message:"该项不能为空",trigger:"blur"}]},{title:"账单类型",key:"billType",element:"radio",options:[{label:"应收",value:"COST"},{label:"应付",value:"PAY"}],rules:[{required:!0,message:"该项不能为空",trigger:"blur"}]}],formTextAreaEl:[{title:"汇总计划备注",key:"collectSchemeDesc",element:"input",type:"textarea"}],emitOpenDialog:e=>{},inputDone:e=>{let a={...e};var t=e.timeFormula[0].split("-"),l=(e=e.timeFormula[1].split("-"),(new j.$DataTool).timeStamp2Time(Date.parse(new Date)).split("-"));a.timeFormulaStart=Number(t[1])-Number(l[1])+"."+Number(t[2]),a.timeFormulaEnd=Number(l[1])-Number(e[1])+"."+Number(e[2]),t=(new j.$DataTool).timeStamp2Time(Date.parse(new Date)).slice(0,7);a.costTermFormula=(Date.parse(a.costTermFormula)-Date.parse(t))/2592e6|0,j.$alert("是否确认提交？","提示",{type:"info",icon:"InfoFilled",confirmButtonText:"确定",callback:e=>{"confirm"===e&&(a.id?H.value.updateCollent([a]).then((e=>{200===e.code&&(Q.isShow=!1,j.$message.success("更新成功"),H.value.initData(this,j.$refs.table))})):H.value.addCollent(a).then((e=>{200===e.code&&(Q.isShow=!1,j.$message.success("新增成功"),H.value.initData(this,j.$refs.table))})))}})}}),J=({forMatValue:e})=>e,X=async e=>{e.id||0!==H.value.selections.length?j.$alert("是否确认删除？","提示",{type:"error",icon:"InfoFilled",confirmButtonText:"确定",callback:a=>{"confirm"===a&&(a=e.id?[e.id]:H.value.selections.map((e=>e.id)),H.value.deleteCollent(a).then((e=>{200===e.code&&j.$alert("删除成功","提示",{type:"success",icon:"InfoFilled",showCancelButton:!1,callback:()=>{H.value.initData(this,j.$refs.table)}})})))}}):j.$message.error("请选择数据")},ee=(0,o.qj)({isShow:!1,dataSource:null,searchPlaceholde:"",doSearch:e=>{},chooseRow:e=>{}}),ae=(0,o.iH)({users:[],scheme:[]}),te=(0,o.iH)(""),le=(0,o.iH)(!1),oe=()=>{le.value=!0},re=()=>{ae.value.users.push(te.value),te.value="",le.value=!1},ne=(0,o.qj)([]);return(e,a)=>{const s=(0,l.up)("CircleCloseFilled"),h=(0,l.up)("el-icon");var g=(0,l.up)("el-drawer");const F=(0,l.up)("el-date-picker"),O=(0,l.up)("el-tag"),W=(0,l.up)("el-input"),K=(0,l.up)("el-option"),Z=(0,l.up)("el-select");var q=(0,l.up)("el-dialog"),Y=(0,l.Q2)("authorityHandle");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",v,[(0,l.Wm)(m.Z,{"filter-items":H.value.tableHeader,onSearch:P},null,8,["filter-items"])]),(0,l._)("div",w,[(0,l._)("div",b,[(0,l.wy)(((0,l.wg)(),(0,l.j4)((0,o.SU)(f.ElButton),{class:"handle-btn",color:"#4a78bd",style:{color:"#666"},plain:"",onClick:$},{default:(0,l.w5)((()=>[(0,l.Uk)(" 新增汇总计划 ")])),_:1})),[[Y,"summaryPlan:add"]])])]),(0,l.Wm)(d.Z,{ref:"table","need-end-handle":"","need-customize-cell-renderer":"","end-handle-width":300,total:H.value.total,"current-page":H.value.currentPage,"page-size":H.value.pageSize,"table-data":H.value.tableData,columns:H.value.tableHeader,loading:(0,o.SU)(p.V)&&!Q.isShow&&!t.value,"default-end-handle":!1,"customize-end-handle":A,"for-mat-data":H.value.forMatData,"customize-cell-renderer":J,onSelectionChange:a[0]||(a[0]=e=>H.value.selectionChange(e,H.value,(0,o.SU)(j).$refs.table)),onRefresh:a[1]||(a[1]=e=>H.value.initData(H.value,(0,o.SU)(j).$refs.table)),onEditRow:B,onCurrentChange:a[2]||(a[2]=e=>H.value.currentPageChange(e,H.value,(0,o.SU)(j).$refs.table)),onSizeChange:a[3]||(a[3]=e=>H.value.pageSizeChange(e,H.value,(0,o.SU)(j).$refs.table)),onEditTableHeader:a[4]||(a[4]=e=>I.value=!0)},null,8,["total","current-page","page-size","table-data","columns","loading","for-mat-data"]),(0,l.Wm)(g,{modelValue:I.value,"onUpdate:modelValue":a[6]||(a[6]=e=>I.value=e),"show-close":!1},{header:(0,l.w5)((({titleId:e,titleClass:t})=>[(0,l._)("h4",{id:e,class:(0,r.C_)(t)}," 通过拖拽设置您喜欢的表头顺序 ",10,S),(0,l.Wm)((0,o.SU)(f.ElButton),{type:"danger",onClick:a[5]||(a[5]=e=>I.value=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"el-icon--left"},{default:(0,l.w5)((()=>[(0,l.Wm)(s)])),_:1}),(0,l.Uk)(" 关闭 ")])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(u.Z,{"is-show-edit-table-header":I.value,modules:"role"},null,8,["is-show-edit-table-header"])])])),_:1},8,["modelValue"]),Q.isShow?((0,l.wg)(),(0,l.j4)(c.Z,{key:0,ref:"dialogForm",width:"60%",loading:(0,o.SU)(p.V),"my-client":z.value,"form-data":G.value,"is-show":Q.isShow,title:"请填写相关信息","form-input-el":Q.formInputEl,"form-select-el":Q.formSelectEl,"form-text-area-el":Q.formTextAreaEl,"form-upload-el":Q.formUploadEl,"form-time-and-number":Q.formTimeAndNumber,onCloseDialog:a[7]||(a[7]=e=>Q.isShow=!1),onEmitOpenDialog:Q.emitOpenDialog,onInputDone:Q.inputDone},null,8,["loading","my-client","form-data","is-show","form-input-el","form-select-el","form-text-area-el","form-upload-el","form-time-and-number","onEmitOpenDialog","onInputDone"])):(0,l.kq)("",!0),ee.isShow?((0,l.wg)(),(0,l.j4)(i.Z,{key:1,ref:"dialogSearch","need-selection":ee.useChoose,"use-choose":ee.useChoose,"append-table-style":{background:"#126f9e",color:"#fff",borderColor:"rgba(192, 192, 192,.5)"},width:"60%","search-input-placeholder":ee.searchPlaceholde,"is-show":ee.isShow,"data-source":ee.dataSource,title:"选择数据","is-show-search-input":"",loading:(0,o.SU)(p.V),onCloseDialog:a[8]||(a[8]=e=>ee.isShow=!1),onDoDialogSearch:ee.doSearch,onChooseRow:ee.chooseRow,onSubmit:ee.chooseRow},null,8,["need-selection","use-choose","append-table-style","search-input-placeholder","is-show","data-source","loading","onDoDialogSearch","onChooseRow","onSubmit"])):(0,l.kq)("",!0),(0,l.Wm)(q,{modelValue:t.value,"onUpdate:modelValue":a[13]||(a[13]=e=>t.value=e),top:"4%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"lock-scroll":""},{header:(0,l.w5)((({titleId:e,titleClass:n})=>[(0,l._)("div",y,[(0,l._)("h5",{id:e,class:(0,r.C_)(n)},[(0,l.Uk)(" 导出实时账单数据 "),C],10,D),(0,l.Wm)((0,o.SU)(f.ElButton),{class:"dialog-close-btn",type:"danger",icon:"CloseBold",circle:"",plain:"",onClick:a[9]||(a[9]=e=>t.value=!1)})])])),default:(0,l.w5)((()=>[(0,l._)("div",T,[k,(0,l._)("span",null,(0,r.zw)((0,o.SU)(R).collectSchemeName),1)]),(0,l._)("div",_,[U,(0,l.Wm)(F,{modelValue:ae.value.time,"onUpdate:modelValue":a[10]||(a[10]=e=>ae.value.time=e),type:"datetimerange","value-format":"YYYY-MM-DD hh:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",class:"mr10"},null,8,["modelValue"])]),(0,l._)("div",N,[x,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.value.users,((e,a)=>((0,l.wg)(),(0,l.j4)(O,{key:e,class:"mr10",closable:"","disable-transitions":!1,onClose:e=>{var t;t=a,ae.value.users.splice(t,1)}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e),1)])),_:2},1032,["onClose"])))),128)),le.value?((0,l.wg)(),(0,l.j4)(W,{key:0,ref:"InputRef",modelValue:te.value,"onUpdate:modelValue":a[11]||(a[11]=e=>te.value=e),class:"new-input",size:"small",placeholder:"请输入Code",onKeyup:(0,n.D2)(re,["enter"]),onBlur:re},null,8,["modelValue","onKeyup"])):((0,l.wg)(),(0,l.j4)((0,o.SU)(f.ElButton),{key:1,class:"button-new-tag",size:"small",onClick:oe},{default:(0,l.w5)((()=>[(0,l.Uk)(" + 新增 ")])),_:1}))]),(0,l._)("div",M,[E,(0,l.Wm)(Z,{modelValue:ae.value.scheme,"onUpdate:modelValue":a[12]||(a[12]=e=>ae.value.scheme=e),multiple:"",filterable:"",placeholder:"不选则默认全导出",style:{width:"40vw"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ne,(e=>((0,l.wg)(),(0,l.j4)(K,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,l._)("div",V,[(0,l.Wm)((0,o.SU)(f.ElButton),{type:"primary",size:"small",loading:(0,o.SU)(p.V),onClick:L},{default:(0,l.w5)((()=>[(0,l.Uk)(" 确认导出 ")])),_:1},8,["loading"])])])),_:1},8,["modelValue"])])}}};var F=(0,t(40089).Z)(a,[["__scopeId","data-v-4f433504"]])},6094:function(e,a,t){t.d(a,{Z:function(){return p}}),t(57658);var l=t(73396),o=t(44870),r=t(49242),n=t(87139),s=t(98249),c=t(40130),i=t(46623);const u={class:"container"},d={class:"drag-box"},m={class:"drag-btn"};a={__name:"dynamicHeader",props:{isShowEditTableHeader:{type:Boolean,default:!1},modules:{type:String,default:""},filterList:{type:Array,default:()=>[]}},emits:["updateCompleted"],setup(e,{emit:a}){const t=e,{_state:p,commit:h}=(0,i.oR)(),f=p.data[t.modules].defaultTableHeader,g=(0,o.qj)([]),v=(0,o.iH)(!1),w=((0,l.wF)((()=>{(g.length=0)===t.filterList.length?g.push(...p.data[t.modules].tableHeader):p.data[t.modules].tableHeader.forEach((e=>{t.filterList.includes(e.key)||g.push(e)}))})),e=>{v.value=!1}),b=()=>{c.T.confirm("重置之后保存的数据将会丢失，是否继续？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{g.length=0,g.push(...JSON.parse(JSON.stringify(f))),h(t.modules+"/updateTableHeader",g),c.T.alert("修改成功！刷新后生效","提示",{type:"warning",icon:"InfoFilled",confirmButtonText:"立即刷新",callback:e=>{a("updateCompleted"),location.reload()}}),a("updateCompleted")})).catch((()=>{}))},S=()=>{c.T.confirm("确认保存？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{0!==t.filterList.length&&p.data[t.modules].tableHeader.forEach((e=>{t.filterList.includes(e.key)&&g.push(e)})),h(t.modules+"/updateTableHeader",g),c.T.alert("设置成功！刷新后生效","提示",{type:"warning",icon:"InfoFilled",confirmButtonText:"立即刷新",callback:e=>{a("updateCompleted"),location.reload()}})})).catch((()=>{}))};return(e,a)=>{const t=(0,l.up)("el-tag"),c=(0,l.up)("el-checkbox");var i=(0,l.up)("el-button");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("div",d,[(0,l.Wm)((0,o.SU)(s.J),{list:g,"chosen-class":"chosen",group:"name","force-fallback":"true",animation:"500","fallback-tolerance":4,onStart:a[0]||(a[0]=e=>v.value=!0),onEnd:w},{default:(0,l.w5)((()=>[(0,l.Wm)(r.W3,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.key||e.prop,class:"item"},[(0,l.Wm)(t,{size:"large"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.title||e.label),1)])),_:2},1024),(0,l._)("div",null,[(0,l.Wm)(c,{modelValue:e.isFixed,"onUpdate:modelValue":a=>e.isFixed=a,label:"固定在左边",size:"large"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(c,{modelValue:e.isShow,"onUpdate:modelValue":a=>e.isShow=a,label:"是否展示",size:"large"},null,8,["modelValue","onUpdate:modelValue"])])])))),128))])),_:1})])),_:1},8,["list"])]),(0,l._)("div",m,[(0,l.Wm)(i,{type:"warning",onClick:b},{default:(0,l.w5)((()=>[(0,l.Uk)(" 重置 ")])),_:1}),(0,l.Wm)(i,{type:"primary",onClick:S},{default:(0,l.w5)((()=>[(0,l.Uk)(" 保存 ")])),_:1})])])}}};var p=(0,t(40089).Z)(a,[["__scopeId","data-v-4c5f22fa"]])},29833:function(e,a,t){t.d(a,{Z:function(){return s}}),t(57658);var l=t(73396),o=t(87139),r=t(44870);const n={class:"el-dropdown-link flex-center",style:{outline:"none"}};a={__name:"moreOptions",props:{title:{type:String,default:"更多"},needPerList:{type:Object,default:()=>[]}},emits:["doAction"],setup(e,{emit:a}){const t=e,s=(0,r.qj)([]),c=e=>a("doAction",e),i=e=>{s.length=0;const a=JSON.parse(sessionStorage.getItem("userInfo")).permissions;a.includes("*:*:*")?s.push(...t.needPerList):t.needPerList.forEach((e=>{a.includes(e.per)&&s.push(e)}))};return(a,t)=>{const r=(0,l.up)("arrow-down"),u=(0,l.up)("el-icon"),d=(0,l.up)("el-dropdown-item"),m=(0,l.up)("el-dropdown-menu");var p=(0,l.up)("el-dropdown");return(0,l.wg)(),(0,l.j4)(p,{trigger:"click",onCommand:c,onVisibleChange:i},{dropdown:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s,(e=>((0,l.wg)(),(0,l.j4)(d,{key:e.command,command:e.command},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.label),1)])),_:2},1032,["command"])))),128))])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l.Uk)((0,o.zw)(e.title)+" ",1),(0,l.Wm)(u,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1})])])),_:1})}}};var s=(0,t(40089).Z)(a,[["__scopeId","data-v-5352b84c"]])}}]);