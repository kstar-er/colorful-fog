"use strict";(self.webpackChunksystem=self.webpackChunksystem||[]).push([[7586],{31103:function(e,a,t){t.d(a,{V:function(){return s.V},o:function(){return r}}),t(57658);var s=t(81081);class r extends t(20566).Z{constructor({modules:e="",selectUri:a="/",deleteUri:t="/",selectOneUri:s="/",pageSize:r=20,tableHeader:d}={}){super({modules:e,selectUri:a,deleteUri:t,selectOneUri:s,pageSize:r,tableHeader:d})}forMatData(e,a){switch(e){case"sex":return+a?"女":"男";case"status":return+a?"停用":"正常";case"avatar":return"点击浏览";default:return a&&0<a.toString().length||"number"==typeof a?a:"-"}}createTreeData(e){let a=[];return e.forEach((t=>{var s;t.label=t.deptName,t.value=t.deptId,t.checked=!1,a.push((s=t,e.forEach((e=>{e.parentId===s.deptId&&s.children.push(e)})),s))})),a[0]}async getRole(){var{code:e,data:a,msg:t}=(await s.K.post("/system/role/list",{}))["data"];return 200===e?{code:e,data:a}:t}async getRoleById(e){var{code:e,data:a,msg:t}=(await s.K.get("/system/user/authRole/"+e))["data"];return 200===e?{code:e,data:a}:t}async getDept(){var{data:e,code:a}=(await s.K.post("/system/dept/list",{}))["data"];if(200===a)return this.createTreeData(e)}async addUser(e){let a="";a=e.commission?"/system/user?commission="+e.commission:"/system/user";var{code:e,data:t,msg:r}=(await s.K.post(a,e))["data"];return 200===e?{code:e,data:t}:r}async getUser(e){var{code:e,data:a,msg:t,roleIds:r,roles:d}=(await s.K.get("/system/user/"+e))["data"];return 200===e?{code:e,data:a,roleIds:r,roles:d}:t}async deleteUser(e){var{code:e,data:a,msg:t}=(await s.K.delete("/system/user/"+e))["data"];return 200===e?{code:e,data:a}:t}async updateUser(e){let a="";a=e.commission?"/system/user?commission="+e.commission:"/system/user";var{code:e,data:t,msg:r}=(await s.K.put(a,e))["data"];return 200===e?{code:e,data:t}:r}async changeStatus(e){var{code:e,data:a,msg:t}=(await s.K.put("system/user/changeStatus",e))["data"];return 200===e?{code:e,data:a}:t}async changePsw(e){var{code:e,data:a,msg:t}=(await s.K.put("system/user/resetPwd",e))["data"];return 200===e?{code:e,data:a}:t}async initData(e=this,a){var{data:t,code:r}=(await s.K.post(`${e.selectUri}?pageNum=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===r&&(e.total=t.total,e.tableData.length=0,t.rows?e.tableData.push(...t.rows.map((e=>(e.deptName=e.dept?e.dept.deptName:null,e)))):e.tableData.push(...t),a?.clearSelection())}async getAgencyLogin(){var{code:e,data:a,msg:t}=(await s.K.get("/xindian/agency/loginUser"))["data"];return 200===e?{code:e,data:a}:t}}},47586:function(e,a,t){t.r(a),t.d(a,{default:function(){return c}});var s=t(73396),r=t(44870),d=t(83762),i=t(12862),l=t(31103),n=t(22483);const o={class:"data-filter"},u=(e=>((0,s.dD)("data-v-432629f4"),e=e(),(0,s.Cn)(),e))((()=>(0,s._)("div",{class:"extend-handle"},[(0,s._)("div",{class:"extend-handle-left"})],-1)));a={__name:"loginRecord",setup(e){const a=(0,s.FN)()["proxy"],t=(0,n.yj)(),c=(0,r.iH)(null),m=((0,s.YP)((()=>t.path),(async()=>{"/system/loginRecord"===t.path&&t.query&&t.query.userName&&(c.value.searchData={userName:t.query.userName},c.value.initData(this,a.$refs.table))})),()=>{c.value=new l.o({selectUri:"/system/logininfor/list",tableHeader:[{title:"用户名称",dataKey:"userName",key:"userName",width:250,type:"text",isShow:!0,isFixed:!1},{title:"登录时间",dataKey:"loginTime",key:"loginTime",width:250,type:"text",isShow:!0,isFixed:!1},{title:"浏览器",dataKey:"browser",key:"browser",width:250,type:"text",isShow:!0,isFixed:!1},{title:"ip",dataKey:"ipaddr",key:"ipaddr",width:250,type:"text",isShow:!0,isFixed:!1},{title:"ip类型",dataKey:"loginLocation",key:"loginLocation",width:250,type:"text",isShow:!0,isFixed:!1},{title:"操作系统",dataKey:"os",key:"os",width:250,type:"text",isShow:!0,isFixed:!1},{title:"infoId",dataKey:"infoId",key:"infoId",width:250,type:"text",isShow:!0,isFixed:!1}]}),c.value.initTableHeader(),t.query.userName&&(c.value.searchData={userName:t.query.userName}),c.value.initData(this,a.$refs.table)}),h=((0,s.wF)((()=>{m()})),e=>{c.value.search(e,this,a.$refs.table)}),y=({forMatValue:e})=>e;return(e,t)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",o,[(0,s.Wm)(i.Z,{"filter-items":c.value.tableHeader,onSearch:h},null,8,["filter-items"])]),u,(0,s.Wm)(d.Z,{ref:"table","need-end-handle":"","need-check-box":!1,"end-handle-width":140,total:c.value.total,"current-page":c.value.currentPage,"page-size":c.value.pageSize,"table-data":c.value.tableData,columns:c.value.tableHeader,loading:(0,r.SU)(l.V),"default-end-handle":!1,"for-mat-data":c.value.forMatData,"need-customize-cell-renderer":!0,"customize-cell-renderer":y,onSelectionChange:t[0]||(t[0]=e=>c.value.selectionChange(e,c.value,(0,r.SU)(a).$refs.table)),onRefresh:t[1]||(t[1]=e=>c.value.initData(c.value,(0,r.SU)(a).$refs.table)),onCurrentChange:t[2]||(t[2]=e=>c.value.currentPageChange(e,c.value,(0,r.SU)(a).$refs.table)),onSizeChange:t[3]||(t[3]=e=>c.value.pageSizeChange(e,c.value,(0,r.SU)(a).$refs.table)),onEditTableHeader:t[4]||(t[4]=a=>e.isShowEditTableHeader=!0)},null,8,["total","current-page","page-size","table-data","columns","loading","for-mat-data"])]))}};var c=(0,t(40089).Z)(a,[["__scopeId","data-v-432629f4"]])}}]);