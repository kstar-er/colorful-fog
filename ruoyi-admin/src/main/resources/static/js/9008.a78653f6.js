"use strict";(self.webpackChunksystem=self.webpackChunksystem||[]).push([[9008],{12608:function(e,a,l){l.d(a,{V:function(){return t.V},o:function(){return s}}),l(57658);var t=l(81081),o=(a=l(20566),l(68521));class s extends a.Z{constructor({modules:e="",selectUri:a="/",deleteUri:l="/",selectOneUri:t="/",pageSize:o=20,tableHeader:s}={}){super({modules:e,selectUri:a,deleteUri:l,selectOneUri:t,pageSize:o,tableHeader:s})}async initData(e=this,a){var{data:l,code:o}=(await t.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===o&&(e.total=l.pageInfo.total,e.tableData.length=0,e.tableData.push(...l.pageInfo.list),a?.clearSelection())}currentPageChange(e,a=this,l){a.currentPage=e,a.initData(a,l)}pageSizeChange(e,a=this,l){a.currentPage=1,a.pageSize=e,a.initData(a,l)}search(e,a=this,l){a.searchData=e,a.currentPage=1,a.initData(a,l,!0)}forMatData(e,a){var l=e=>{var a=(new o.x).timeStamp2Time(Date.parse(new Date)).split("-");e=e.toString().split(".");return Number(a[1])-Math.abs(Number(e[0]))<=0&&(a[0]=a[0]-Math.abs(Number(a[1])-Math.abs(Number(e[0])))),a[0]+"-"+(Number(a[1])-Math.abs(Number(e[0])))+"-"+e[1]};switch(e){case"costTermFormula":var t=(new o.x).timeStamp2Time(Date.parse(new Date)).slice(0,7);return(new o.x).timeStamp2Time(Date.parse(t)+2592e6*a).slice(0,7);case"timeFormulaStart":case"timeFormulaEnd":return l(a);case"collectObject":return"BILL"===a?"汇总原始数据":"二次汇总";case"billType":return"COST"===a?"应收":"应付";default:return e&&a&&(-1!==e.indexOf("Time")||-1!==e.indexOf("Date"))?(new o.x).timeStamp2Time(a,"yyyy-MM-dd hh:mm:ss"):a&&0<a.toString().length||"number"==typeof a?a:"-"}}async addCollent(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/collectSchemeMain/add",e))["data"];return 200===e?{data:a,code:e}:l}async updateCollent(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/collectSchemeMain/update",e))["data"];return 200===e?{data:a,code:e}:l}async deleteCollent(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/collectSchemeMain/delete",e))["data"];return 200===e?{data:a,code:e}:l}async addCollectDetails(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/CollectSchemeDetail/addBatch",e))["data"];return 200===e?{data:a,code:e}:l}async updateCollectDetails(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/CollectSchemeDetail/update",e))["data"];return 200===e?{data:a,code:e}:l}async deleteCollectDetails(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/CollectSchemeDetail/delete",e))["data"];return 200===e?{data:a,code:e}:l}async getMainDetail(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/collectSchemeMain/select?currentPage=1&pageSize=1",{id:e}))["data"];return 200===e?{data:a,code:e}:l}async createCollect(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/collectSchemeMain/create",e))["data"];return 200===e?{data:a,code:e}:l}async createOneUser(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/collectSchemeMain/createOneUser",e))["data"];return 200===e?{data:a,code:e}:l}async createAndExport(e){var{code:e,data:a,msg:l}=(await t.K.post("/colorful-fog/collectSchemeMain/createAndExport",e))["data"];return 200===e?{data:a,code:e}:l}}},81198:function(e,a,l){l.d(a,{B:function(){return o}});var t=l(73396);function o(){const e=(0,t.FN)()["proxy"];return{popup:{handleAlert:(a,l,t,o)=>{t={type:"info",showCancelButton:!0,cancelButtonText:"再想想",confirmButtonText:"确认",callback:e=>{"confirm"===e&&o()},...t},e.$alert(l,a,t)},handlePrompt:(a,l,t,o)=>{t={confirmButtonText:"确定",cancelButtonText:"取消",...t},e.$prompt(l,a,t).then((({value:e})=>{o(e)})).catch((()=>{}))}}}}},51881:function(e,a){a.Z={name:"",key:"",policy:"eyJleHBpcmF0aW9uIjoiMzAyMi0wMS0wMVQxMjowMDowMC4wMDBaIiwiY29uZGl0aW9ucyI6W1siY29udGVudC1sZW5ndGgtcmFuZ2UiLDAsMTA0ODU3NjAwMF1dfQ==",OSSAccessKeyId:"LTAI5t7u1jzmji9stQ5LzCpe",success_action_status:"200",signature:"tF/dwb/qvoQjHffu0kq5FWQq9KY="}},52925:function(e,a,l){l.r(a),l.d(a,{default:function(){return O}}),l(57658);var t=l(73396),o=l(44870),s=l(87139),r=l(81081),c=l(29833),i=l(88490),d=l(10100),u=l(12862),n=(a=l(20566),l(68521));class p extends a.Z{constructor({modules:e="",selectUri:a="/",deleteUri:l="/",selectOneUri:t="/",pageSize:o=20,tableHeader:s}={}){super({modules:e,selectUri:a,deleteUri:l,selectOneUri:t,pageSize:o,tableHeader:s})}forMatData(e,a){return e[a.property]&&"NULL"!==e[a.property]&&"0"!==e[a.property]?"autoAuditTime"===a.property||(new n.x).isTimestamp(e[a.property])?(new n.x).timeStamp2Time(+e[a.property],"yyyy-MM-dd"):Number.isNaN(Number(e[a.property]))?e[a.property]??"-":Number(e[a.property]).toFixed(2):"-"}async initTableHeader(e=this){var{data:a,code:l}=(await r.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=1`,e.searchData))["data"];if(200===l&&a)return e.tableHeader=[{title:"状态",dataKey:"auditStatus",key:"auditStatus",width:300,type:"text",isShow:!0,isFixed:!1},{title:"所属经销商",dataKey:"belongArchiveName",key:"belongArchiveName",width:300,type:"text",isShow:!0,isFixed:!1},{title:"账单编码",dataKey:"billCode",key:"billCode",width:300,type:"text",isShow:!0,isFixed:!1},{title:"账单类型",dataKey:"billType",key:"billType",width:300,type:"text",isShow:!0,isFixed:!1},{title:"账期",dataKey:"costTerm",key:"costTerm",width:300,type:"text",isShow:!0,isFixed:!1}],l=a.resultNameList.map((e=>({title:e.resultName,dataKey:e.resultCode,key:e.resultCode,dataType:e.resultType,decimal:e.decimal,width:300,type:"text",isShow:!0,isFixed:!1}))),e.tableHeader.push(...l),e.tableHeader}async initData(e=this,a){var{data:l,code:t}=(await r.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===t&&l&&(e.tableData.length=0,e.total=l.resultDataList.total,e.tableData.push(...l.resultDataList.list.map((e=>(e={...e,...e.data},delete e.data,e)))))}currentPageChange(e,a=this,l){a.currentPage=e,a.initData(a,l)}pageSizeChange(e,a=this,l){a.currentPage=1,a.pageSize=e,a.initData(a,l)}search(e,a=this,l){a.searchData=e,a.currentPage=1,a.initData(a,l,!0)}async updateCollect(e){var{code:e,data:a,msg:l}=(await r.K.post("/colorful-fog/CollectResultMain/manualUpdate",e))["data"];return 200===e?{data:a,code:e}:l}async checkUpdateData(e){var{code:e,data:a,msg:l}=(await r.K.post("/colorful-fog/UpdateBillLog/selectOneFieldLog",e))["data"];return 200===e?{data:a,code:e}:l}async getCollectExportData(e){var{code:e,data:a,msg:l}=(await r.K.post("/colorful-fog/CollectResultMain/exportExcel",e))["data"];return 200===e?{data:a,code:e}:l}async updateBill(e){var{code:e,data:a,msg:l}=(await r.K.post("/colorful-fog/schemeMain/flash",e))["data"];return 200===e?{data:a,code:e}:l}async audit(e){var{code:e,data:a,msg:l}=(await r.K.post("/colorful-fog/CollectResultMain/audit",e))["data"];return 200===e?{data:a,code:e}:l}async complexExport(e){var{code:e,data:a,msg:l}=(await r.K.post("/colorful-fog/CollectResultMain/exportExcelBatch",e))["data"];return 200===e?{data:a,code:e}:l}async refresh(e){var{code:e,data:a,msg:l}=(await r.K.post("/colorful-fog/schemeMain/flashByCollectCode",e))["data"];return 200===e?{data:a,code:e}:l}async getCollectFieldList(e){var{code:e,data:a,msg:l}=(await r.K.post("/colorful-fog/CollectSchemeDetail/select?pageSize=20000&currentPage=1",{collectSchemeCode:e}))["data"];return 200===e?{data:a,code:e}:l}}var m=l(12608),h=l(75065),g=l(82261),v=l(22483),y=l(51881),f=l(81198);a=e=>((0,t.dD)("data-v-00a9855b"),e=e(),(0,t.Cn)(),e);const w={class:"data-filter"},b={class:"extend-handle"},S={class:"extend-handle-left"},C={class:"ml10"},D={style:{padding:"0 10px 10px 10px",background:"#fff"}},x={class:"jx-dialog-header"},k=["id"],U=[a((()=>(0,t._)("h4",{class:"inline-block"}," 请选择自动审核时间 ",-1)))],_={class:"mb40 flex-center"},T={class:"mt10"},V={class:"jx-dialog-header"},N=["id"],M=[a((()=>(0,t._)("h4",{class:"inline-block"}," 请填写相关信息 ",-1)))],E={class:"mt10"},z={class:"jx-dialog-header"},j=["id"],H=[a((()=>(0,t._)("h4",{class:"inline-block"}," 请点击查看相关信息 ",-1)))],A={class:"jx-dialog-header"},R=["id"],B=[a((()=>(0,t._)("h4",{class:"inline-block"}," 账单字段更新日志 ",-1)))],W=a((()=>(0,t._)("div",{class:"mt10 mb10"},[(0,t._)("span",{class:"table-label",style:{"font-weight":"800"}},"更新前"),(0,t._)("span",{class:"table-label",style:{"font-weight":"800"}},"更新后"),(0,t._)("span",{class:"table-label",style:{"font-weight":"800"}},"操作时间"),(0,t._)("span",{class:"table-label",style:{"font-weight":"800"}},"操作人")],-1))),L={class:"update-list"},I=["title"],K=["title"],P={class:"table-label"},$={class:"table-label"};a={__name:"summarizeData",setup(e){const a=(0,t.Q2)("authority"),l=(0,v.yj)();(0,v.tv)();const n=(0,o.iH)(""),O=(0,t.FN)()["proxy"],F=(0,f.B)()["popup"];(0,o.iH)(!1);const q=(0,o.iH)(null),Z=(0,o.iH)(""),G=(0,o.iH)(""),Y=((0,t.YP)((()=>l.path),(()=>{"/financial/SummarizeData"===l.path&&q.value&&l.query.collectSchemeCode&&(Z.value=l.query.collectSchemeCode,G.value=l.query.name,q.value.searchData.collectSchemeCode=Z.value,q.value.tableData.length=0,Y())})),()=>{q.value.initTableHeader(this).then((e=>{if(e&&0!==e.length){let a=new O.$DataTool;q.value.forMatData=(l,o)=>{var s;return"auditStatus"===o.property?{WAIT_START_AUDIT:"待发起审核",WAIT_AUDIT:"等待审核",PASS_AUDIT:"审核通过",REFUSE_AUDIT:"审核不通过"}[l[o.property]]:(s=e[o.getColumnIndex()-1],"NULL"!==l[o.property]&&l.hasOwnProperty(o.property)?"DATE"===s.dataType?a.timeStamp2Time(+l[o.property],"yyyy-MM-dd hh:mm:ss"):"NUM"!==s.dataType||Number.isNaN(Number(l[o.property]))?"string"==typeof l[o.property]&&l[o.property].startsWith("http")?(0,t.h)(h.E2,{type:"primary",onClick:()=>ee(l,o)},{default:()=>"点击查看"}):l[o.property]??"-":Number(l[o.property]).toFixed(s.decimal??2):"-")},q.value.initData(this,O.$refs.table)}}))}),Q=((0,t.wF)((async()=>{(async()=>{Z.value=l.query.collectSchemeCode,G.value=l.query.name,q.value=new p({tableHeader:[],selectUri:"/colorful-fog/CollectResultMain/list"}),q.value.forMatDataV2=(e,a)=>q.value.forMatData(e,a),Z.value?q.value.searchData={collectSchemeCode:Z.value}:ze()})()})),(0,o.iH)(!1)),J=(0,o.iH)([]),X=["txt","docx","doc","jpeg","png","jpg","xls","xlsx","pdf"],ee=(e,a)=>{J.value=[],"string"==typeof e[a.property]&&X.includes(e[a.property].split(".").pop().toLowerCase())&&(e[a.property].split(";").forEach((e=>{J.value.push(e.split("/").pop())})),Q.value=!0)},ae=(0,o.iH)([]),le=()=>{q.value.selections.length?q.value.getCollectFieldList(Z.value).then((e=>{e=e.data.pageInfo.list.filter((e=>"EMPTY"===e.collectType)),0===e.length?O.$message.error("暂无空白字段可以更改"):(ae.value=[],oe.length=0,e.forEach(((e,a)=>{let l=null;switch(e.resultType){case"NUMBER":l=q.value.selections[0][e.collectResultCode]??0;break;case"URL":ae.value[a]=[];var t=q.value.selections[0]?[]:[e.collectResultCode].split(";");l=t[0]?(ae.value[a]=t.map((e=>{var a=e.split("/").pop();return{url:e,name:a}})),t):[];break;default:l=q.value.selections[0][e.collectResultCode]??""}oe.push({billType:"COLLECT",updateValue:l,fieldCode:e.collectResultCode,fieldName:e.collectResultName,billCode:"",collectResultName:e.collectResultName,resultType:e.resultType,id:e.id})})),se.value=!0)})):O.$message.error("请先选择修改数据")},te=(0,o.iH)(""),oe=(0,o.qj)([]),se=(0,o.iH)(!1);let re=(0,o.iH)(y.Z);const ce=e=>(re.value.name=e.name,re.value.key="collectBill/"+e.name,!0),ie=()=>{F.handleAlert("提示","是否更新空白字段",{},(()=>{q.value.selections.map(((e,a)=>{let l=[];oe.forEach(((a,t)=>{a.billCode=e.billCode,Array.isArray(a.updateValue)&&(a.updateValue=a.updateValue.join(";")),null===a.updateValue&&(a.updateValue=""),l.push(a)})),q.value.updateCollect(l).then((e=>{200===e.code&&(O.$message.success("更新成功"),ae.value=[],q.value.tableData.length=0,q.value.initData(),se.value=!1)}))}))}))},de=(0,o.iH)([]),ue=(0,o.iH)([]),ne=(0,o.iH)(!1),pe=(0,o.iH)(0),me=(e,a)=>{ne.value=!1,de.value=[],["txt","docx","doc","xls","xlsx","pdf"].includes(e.name.split(".").pop().toLowerCase())?window.location=`https://jxwlapp.oss-cn-guangzhou.aliyuncs.com/collectBill/${e.name}?download`:(pe.value=function(e,a){for(let l=0;l<e.length;l++)if(e[l].endsWith(a))return l;return-1}(oe[a].updateValue,e.name),de.value=oe[a].updateValue[pe.value],ne.value=!0)},he=e=>{if(0===Object.keys(e).length)return Z.value?(e.collectSchemeCode=Z.value,void q.value.search(e,this,O.$refs.table)):void ze();let a={collectSchemeCode:Z.value,fieldSelectList:{}};Object.entries(e).forEach((([e,l])=>{["belongArchiveName","billCode","billType","costTerm","auditStatus"].includes(e)?a[e]=l:a.fieldSelectList[e]=l})),q.value.search(a,this,O.$refs.table)},ge=({rowdata:e})=>[(0,t.h)("div",{class:"table-handel-div flex-center"},[(0,t.wy)((0,t.h)(g.ElButton,{class:"hover-animation",onClick:()=>{Ee(e)},title:"导出汇总",style:"padding:0;margin:0;background:transparent;width:80px;color:#0c81b1;margin-right:10px"},{default:()=>"导出汇总"}),[[a,"SummarizeData:export"]]),(0,t.wy)((0,t.h)(g.ElButton,{class:"hover-animation",onClick:()=>{De(e)},title:"查看修改日志",style:"padding:0;margin:0 10px 0 0;background:transparent;width:80px;color:#0c81b1"},{default:()=>"递交审核"}),[[a,"SummarizeData:update"]]),(0,t.h)(c.Z,{title:"更多",needPerList:fe,onDoAction:a=>{ye(e,a)}})])],ve=e=>{e={collectResultCode:e.billCode},q.value.refresh(e).then((e=>{200===e.code&&O.$alert("刷新成功","提示",{type:"success",icon:"InfoFilled",showCancelButton:!1,callback:()=>{Y()}})}))},ye=(e,a)=>{switch(a){case"refresh":return void ve(e);case"date":return void Me(e)}};let fe=[{per:"SummarizeData:refresh",label:"刷新账单",command:"refresh"},{per:"SummarizeData:update",label:"修改日志",command:"date"}];const we=(0,o.iH)(!1),be=(0,o.iH)(""),Se=(0,o.iH)(null),Ce=()=>{""!==be.value?xe(Se.value):O.$message.error("请选择自动审核时间")},De=e=>{be.value="",Se.value=e,we.value=!0},xe=e=>{e={auditStatus:"WAIT_AUDIT",id:e.id,autoAuditTime:be.value},q.value.audit(e).then((e=>{200===e.code&&(O.$message.success("递交成功"),we.value=!1,Y())}))},ke=(0,o.iH)(!1),Ue=(0,o.qj)([]),_e=(0,o.iH)(""),Te=(0,o.qj)([]),Ve=e=>{Te.length=0,Ne[n.value]&&Te.push(...Ne[n.value])};let Ne={};const Me=e=>{Ue.length=0,_e.value=e.billCode,q.value.checkUpdateData({billCode:_e.value}).then((e=>{e.data?(Ne=e.data,Te.length=0,q.value.tableHeader.forEach(((e,a)=>{e.title&&Ne[e.key]&&(e={label:e.title,value:e.key},Ue.push(e))})),0!==Ue.length&&(n.value=Ue[0].value),Ne[n.value]&&Te.push(...Ne[n.value]),ke.value=!0):O.$message.error("暂无修改记录")}))},Ee=({billCode:e,id:a})=>{let l=[];q.value.getCollectExportData({code:e,id:a}).then((e=>{200===e.code&&(e.data.forEach((e=>{var a=e.schemeName;let t=["所属经销商Code","所属经销商名称","账单编码","账期"],o=["belongArchiveCode","belongArchiveName","billCode","costTerm"],s=["STRING","STRING","STRING","STRING"],r=[];e.billResultVO.resultNameList.forEach((a=>{t.push(a.resultName),o.push(a.resultCode),s.push({type:e.dataType,decimal:e.decimal})})),e.billResultVO.resultDataList.list.forEach((e=>{e={...e,...e.data};let a=[];o.forEach(((l,t)=>{"DATE"===s[t].type?a.push((new O.$DataTool).timeStamp2Time(+e[l],"yyyy-MM-dd hh:mm:ss")):"NUM"!==s[t].type||Number.isNaN(Number(e[l]))?"NULL"===e[l]?a.push("-"):a.push(e[l]):a.push({v:Number(e[l]),t:"n",z:"0."+new Array(s[t].decimal??2).fill(0).join("")})})),r.push(a)})),l.push({title:a,header:t,style:{},data:r})})),(new O.$DataTool).complexExcel(l,"汇总数据"))}))},ze=async()=>{je.searchPlaceholde="输入账单计划名称进行搜索",je.chooseRow=async e=>{Z.value=e.collectSchemeCode,G.value=e.collectSchemeName,q.value.searchData.collectSchemeCode=e.collectSchemeCode,q.value.tableData.length=0,q.value.tableHeader.length=0,Y(),je.isShow=!1},je.doSearch=e=>{je.dataSource.searchData={},e&&(je.dataSource.searchData.collectSchemeName=e),je.dataSource.initData()},je.dataSource=new m.o({selectUri:"/colorful-fog/collectSchemeMain/select",tableHeader:[{label:"汇总账单名称",prop:"collectSchemeName",width:200},{label:"汇总账单Code",prop:"collectSchemeCode",width:200},{label:"备注",prop:"collectSchemeDesc",width:200}],pageSize:10}),je.dataSource.forMatData=(e,a)=>"billType"===a.property?"PAY"===e[a.property]?"应付":"应收":e[a.property]??"-",await je.dataSource.initData(),je.isShow=!0},je=(0,o.qj)({isShow:!1,dataSource:null,searchPlaceholde:"",doSearch:e=>{},chooseRow:e=>{}}),He=()=>{let e=[];0<q.value.selections.length&&q.value.complexExport(q.value.selections.map((e=>e.id))).then((a=>{200===a.code&&(a.data.forEach((a=>{var l=a.schemeName;let t=["所属经销商Code","所属经销商名称","账单编码","账期"],o=["belongArchiveCode","belongArchiveName","billCode","costTerm"],s=["STRING","STRING","STRING","STRING"],r=[];a.billResultVO.resultNameList.forEach((e=>{t.push(e.resultName),o.push(e.resultCode),s.push({type:e.resultType,decimal:e.decimal})})),a.billResultVO.resultDataList.list.forEach((e=>{e={...e,...e.data};let a=[];o.forEach(((l,t)=>{"DATE"===s[t].type?a.push((new O.$DataTool).timeStamp2Time(+e[l],"yyyy-MM-dd hh:mm:ss")):"NUM"!==s[t].type||Number.isNaN(Number(e[l]))?"NULL"===e[l]?a.push("-"):a.push(e[l]):a.push({v:Number(e[l]),t:"n",z:"0."+new Array(s[t].decimal??2).fill(0).join("")})})),r.push(a)})),e.push({title:l,header:t,style:{},data:r})})),(new O.$DataTool).complexExcel(e,"汇总数据"))}))};return(e,a)=>{const l=(0,t.up)("Edit"),c=(0,t.up)("el-icon"),p=(0,t.up)("el-input"),m=(0,t.up)("el-date-picker"),h=(0,t.up)("xButton");var v=(0,t.up)("el-dialog");const y=(0,t.up)("el-input-number"),f=(0,t.up)("el-upload"),F=(0,t.up)("el-image-viewer"),Z=(0,t.up)("el-form-item"),Y=(0,t.up)("el-form"),X=(0,t.up)("el-tag"),ee=(0,t.up)("el-option"),pe=(0,t.up)("el-select");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",w,[(0,t.Wm)(u.Z,{"filter-items":q.value.tableHeader,onSearch:he},null,8,["filter-items"])]),(0,t._)("div",b,[(0,t._)("div",S,[(0,t._)("div",C,[(0,t.Uk)(" 当前账单： "),(0,t.Wm)(p,{modelValue:G.value,"onUpdate:modelValue":a[0]||(a[0]=e=>G.value=e),clearable:"",style:{width:"220px"},placeholder:"请选择方案",disabled:!0},{append:(0,t.w5)((()=>[(0,t.Wm)((0,o.SU)(g.ElButton),{onClick:ze},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(l)])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,t.Wm)((0,o.SU)(g.ElButton),{class:"ml10",type:"primary",plain:"",onClick:He},{default:(0,t.w5)((()=>[(0,t.Uk)(" 合并导出 ")])),_:1}),(0,t.Wm)((0,o.SU)(g.ElButton),{class:"ml10",type:"primary",plain:"",onClick:le},{default:(0,t.w5)((()=>[(0,t.Uk)(" 更新空白字段 ")])),_:1})])]),(0,t._)("div",D,[(0,t.Wm)(d.Z,{ref:"table","need-selection":"","options-width":280,"need-end-control":"",total:q.value.total,"current-page":q.value.currentPage,"page-size":q.value.pageSize,"table-data":q.value.tableData,"table-header":q.value.tableHeader,loading:(0,o.SU)(r.V)&&!je.isShow&&!ke.value,"for-mat-data":q.value.forMatDataV2,onSelectionChange:a[1]||(a[1]=e=>q.value.selectionChange(e,q.value,(0,o.SU)(O).$refs.table)),onRefresh:a[2]||(a[2]=e=>q.value.initData(q.value,(0,o.SU)(O).$refs.table)),onCurrentChange:a[3]||(a[3]=e=>q.value.currentPageChange(e,q.value,(0,o.SU)(O).$refs.table)),onSizeChange:a[4]||(a[4]=e=>q.value.pageSizeChange(e,q.value,(0,o.SU)(O).$refs.table))},{endOption:(0,t.w5)((({row:e})=>[(0,t.Wm)(ge,{rowdata:e},null,8,["rowdata"])])),_:1},8,["total","current-page","page-size","table-data","table-header","loading","for-mat-data"])]),je.isShow?((0,t.wg)(),(0,t.j4)(i.Z,{key:0,ref:"dialogSearch","use-choose":!1,"append-table-style":{background:"#126f9e",color:"#fff",borderColor:"rgba(192, 192, 192,.5)"},width:"60%","search-input-placeholder":je.searchPlaceholde,"is-show":je.isShow,"data-source":je.dataSource,title:"选择数据","is-show-search-input":"",loading:(0,o.SU)(r.V),onCloseDialog:a[5]||(a[5]=e=>je.isShow=!1),onDoDialogSearch:je.doSearch,onChooseRow:je.chooseRow},null,8,["append-table-style","search-input-placeholder","is-show","data-source","loading","onDoDialogSearch","onChooseRow"])):(0,t.kq)("",!0),(0,t.Wm)(v,{modelValue:we.value,"onUpdate:modelValue":a[9]||(a[9]=e=>we.value=e),width:"400",title:"请选择自动审核时间","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,center:"","destroy-on-close":""},{header:(0,t.w5)((({titleId:e,titleClass:l})=>[(0,t._)("div",x,[(0,t._)("div",{id:e,class:(0,s.C_)(l)},U,10,k),(0,t._)("div",null,[(0,t.Wm)((0,o.SU)(g.ElButton),{class:"dialog-close-btn",type:"danger",icon:"CloseBold",circle:"",onClick:a[6]||(a[6]=e=>we.value=!1)})])])])),default:(0,t.w5)((()=>[(0,t._)("div",_,[(0,t.Wm)(m,{modelValue:be.value,"onUpdate:modelValue":a[7]||(a[7]=e=>be.value=e),type:"date",placeholder:"请选择日期","value-format":"x"},null,8,["modelValue"])]),(0,t._)("div",T,[(0,t.Wm)(h,{type:"primary",style:{float:"right","margin-right":"10px"},onClick:Ce},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1}),(0,t.Wm)(h,{type:"danger",style:{float:"right","margin-right":"10px"},onClick:a[8]||(a[8]=e=>we.value=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)(" 取消 ")])),_:1})])])),_:1},8,["modelValue"]),(0,t.Wm)(v,{modelValue:se.value,"onUpdate:modelValue":a[13]||(a[13]=e=>se.value=e),width:"900",title:"请填写相关信息","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,center:"","destroy-on-close":""},{header:(0,t.w5)((({titleId:e,titleClass:l})=>[(0,t._)("div",V,[(0,t._)("div",{id:e,class:(0,s.C_)(l)},M,10,N),(0,t._)("div",null,[(0,t.Wm)((0,o.SU)(g.ElButton),{class:"dialog-close-btn",type:"danger",icon:"CloseBold",circle:"",onClick:a[10]||(a[10]=e=>se.value=!1)})])])])),default:(0,t.w5)((()=>[(0,t.Wm)(Y,{ref:"Form",model:oe,"label-width":"auto"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(oe,((e,l)=>((0,t.wg)(),(0,t.j4)(Z,{key:l,label:e?.collectResultName+"：",prop:"collect"+e?.id},{default:(0,t.w5)((()=>["NUMBER"===e?.resultType?((0,t.wg)(),(0,t.j4)(y,{key:0,modelValue:oe[l].updateValue,"onUpdate:modelValue":e=>oe[l].updateValue=e,min:-1e9,"controls-position":"right",placeholder:"1",size:"small"},null,8,["modelValue","onUpdate:modelValue"])):(0,t.kq)("",!0),"STRING"===e?.resultType?((0,t.wg)(),(0,t.j4)(p,{key:1,modelValue:oe[l].updateValue,"onUpdate:modelValue":e=>oe[l].updateValue=e,placeholder:`请输入${e?.collectResultName}的相关信息`},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(0,t.kq)("",!0),"DATE"===e?.resultType?((0,t.wg)(),(0,t.j4)(m,{key:2,modelValue:oe[l].updateValue,"onUpdate:modelValue":e=>oe[l].updateValue=e,type:"date","value-format":"x",placeholder:`请选择${e?.collectResultName}的日期`},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(0,t.kq)("",!0),"URL"===e?.resultType?((0,t.wg)(),(0,t.j4)(f,{key:3,ref_for:!0,ref:"upload"+e.id,modelValue:oe[l].updateValue,"onUpdate:modelValue":e=>oe[l].updateValue=e,class:"mr20",action:"https://jxwlapp.oss-cn-guangzhou.aliyuncs.com","file-list":ae.value[l],data:(0,o.SU)(re),"before-upload":ce,"before-remove":e=>{var a=l;e=oe[a].updateValue.indexOf(e.url),oe[a].updateValue.splice(e,1)},"on-preview":e=>me(e,l),"on-success":(e,a)=>{var t;t=l,oe[t].updateValue.push("https://jxwlapp.oss-cn-guangzhou.aliyuncs.com/collectBill/"+a.name)}},{default:(0,t.w5)((()=>[(0,t.Wm)((0,o.SU)(g.ElButton),{type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)(" 点击上传文件 ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue","file-list","data","before-remove","on-preview","on-success"])):(0,t.kq)("",!0),ne.value?((0,t.wg)(),(0,t.j4)(F,{key:4,"url-list":[de.value],onClose:a[11]||(a[11]=e=>ne.value=!1)},null,8,["url-list"])):(0,t.kq)("",!0)])),_:2},1032,["label","prop"])))),128))])),_:1},8,["model"]),(0,t._)("div",E,[(0,t.Wm)(h,{type:"primary",style:{float:"right","margin-right":"10px"},onClick:ie},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1}),(0,t.Wm)(h,{type:"danger",style:{float:"right","margin-right":"10px"},onClick:a[12]||(a[12]=e=>se.value=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)(" 取消 ")])),_:1})])])),_:1},8,["modelValue"]),(0,t.Wm)(v,{modelValue:Q.value,"onUpdate:modelValue":a[16]||(a[16]=e=>Q.value=e),width:"600",title:"请点击查看相关信息","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,center:"","destroy-on-close":""},{header:(0,t.w5)((({titleId:e,titleClass:l})=>[(0,t._)("div",z,[(0,t._)("div",{id:e,class:(0,s.C_)(l)},H,10,j),(0,t._)("div",null,[(0,t.Wm)((0,o.SU)(g.ElButton),{class:"dialog-close-btn",type:"danger",icon:"CloseBold",circle:"",onClick:a[14]||(a[14]=e=>Q.value=!1)})])])])),default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(J.value,((e,a)=>((0,t.wg)(),(0,t.j4)(X,{key:a,class:"file",onClick:a=>{return l=e,ue.value=[],void(["txt","docx","doc","xls","xlsx","pdf"].includes(l.split(".").pop().toLowerCase())?window.location=`https://jxwlapp.oss-cn-guangzhou.aliyuncs.com/collectBill/${l}?download`:(ue.value="https://jxwlapp.oss-cn-guangzhou.aliyuncs.com/collectBill/"+l,te.value=!0));var l}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e),1)])),_:2},1032,["onClick"])))),128)),te.value?((0,t.wg)(),(0,t.j4)(F,{key:0,"url-list":[ue.value],onClose:a[15]||(a[15]=e=>te.value=!1)},null,8,["url-list"])):(0,t.kq)("",!0)])),_:1},8,["modelValue"]),(0,t.Wm)(v,{modelValue:ke.value,"onUpdate:modelValue":a[19]||(a[19]=e=>ke.value=e),"lock-scroll":"",title:"账单字段更新日志","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,top:"4%",width:"70%","destroy-on-close":""},{header:(0,t.w5)((({titleId:e,titleClass:l})=>[(0,t._)("div",A,[(0,t._)("div",{id:e,class:(0,s.C_)(l)},B,10,R),(0,t._)("div",null,[(0,t.Wm)((0,o.SU)(g.ElButton),{class:"dialog-close-btn",type:"danger",icon:"CloseBold",circle:"",onClick:a[17]||(a[17]=e=>{ke.value=!1,n.value=""})})])])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(pe,{modelValue:n.value,"onUpdate:modelValue":a[18]||(a[18]=e=>n.value=e),placeholder:"请选择要查看的字段",style:{width:"240px"},filterable:"",onChange:Ve},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Ue,(e=>((0,t.wg)(),(0,t.j4)(ee,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),W,(0,t._)("div",L,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Te,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a,class:"mt10 mb10 pb10",style:{"border-bottom":"1px dashed #ccc"}},[(0,t._)("span",{class:"table-label",title:e.originValue},(0,s.zw)(e.originValue),9,I),(0,t._)("span",{class:"table-label",title:e.afterValue},(0,s.zw)(e.afterValue),9,K),(0,t._)("span",P,(0,s.zw)(e.updateTime),1),(0,t._)("span",$,(0,s.zw)(e.updateUser),1)])))),128))])])])),_:1},8,["modelValue"])])}}};var O=(0,l(40089).Z)(a,[["__scopeId","data-v-00a9855b"]])},29833:function(e,a,l){l.d(a,{Z:function(){return c}}),l(57658);var t=l(73396),o=l(87139),s=l(44870);const r={class:"el-dropdown-link flex-center",style:{outline:"none"}};a={__name:"moreOptions",props:{title:{type:String,default:"更多"},needPerList:{type:Object,default:()=>[]}},emits:["doAction"],setup(e,{emit:a}){const l=e,c=(0,s.qj)([]),i=e=>a("doAction",e),d=e=>{c.length=0;const a=JSON.parse(sessionStorage.getItem("userInfo")).permissions;a.includes("*:*:*")?c.push(...l.needPerList):l.needPerList.forEach((e=>{a.includes(e.per)&&c.push(e)}))};return(a,l)=>{const s=(0,t.up)("arrow-down"),u=(0,t.up)("el-icon"),n=(0,t.up)("el-dropdown-item"),p=(0,t.up)("el-dropdown-menu");var m=(0,t.up)("el-dropdown");return(0,t.wg)(),(0,t.j4)(m,{trigger:"click",onCommand:i,onVisibleChange:d},{dropdown:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(c,(e=>((0,t.wg)(),(0,t.j4)(n,{key:e.command,command:e.command},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.label),1)])),_:2},1032,["command"])))),128))])),_:1})])),default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t.Uk)((0,o.zw)(e.title)+" ",1),(0,t.Wm)(u,{class:"el-icon--right"},{default:(0,t.w5)((()=>[(0,t.Wm)(s)])),_:1})])])),_:1})}}};var c=(0,l(40089).Z)(a,[["__scopeId","data-v-5352b84c"]])}}]);