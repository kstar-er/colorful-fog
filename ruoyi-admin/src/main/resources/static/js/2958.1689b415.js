"use strict";(self.webpackChunksystem=self.webpackChunksystem||[]).push([[2958],{82134:function(e,a,t){t.d(a,{V:function(){return l.V},o:function(){return d}}),t(57658);var l=t(81081),o=(a=t(20566),t(68521));class d extends a.Z{constructor({modules:e="",selectUri:a="/",deleteUri:t="/",selectOneUri:l="/",pageSize:o=20,tableHeader:d}={}){super({modules:e,selectUri:a,deleteUri:t,selectOneUri:l,pageSize:o,tableHeader:d})}async initData(e=this,a){var{data:t,code:o}=(await l.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===o&&(e.total=t.pageInfo.total,e.tableData.length=0,e.tableData.push(...t.pageInfo.list),a?.clearSelection())}currentPageChange(e,a=this,t){a.currentPage=e,a.initData(a,t)}pageSizeChange(e,a=this,t){a.currentPage=1,a.pageSize=e,a.initData(a,t)}search(e,a=this,t){a.searchData=e,a.currentPage=1,a.initData(a,t,!0)}forMatData(e,a){return"dependType"!==e?e&&a&&(-1!==e.indexOf("Time")||-1!==e.indexOf("Date"))?(new o.x).timeStamp2Time(a,"yyyy-MM-dd hh:mm:ss"):a&&0<a.toString().length||"number"==typeof a?a:"-":{SORT:"名词分类",RANGE:"范围分类",DEPEND:"二次分类",OTHER:"其他"}[a]}async addDependMain(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependMain/addDependMain",e))["data"];return 200===e?{data:a,code:e}:t}async updateDependMain(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependMain/updateDependMain",e))["data"];return 200===e?{data:a,code:e}:t}async deleteDependMain(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependMain/deleteDependMain",e))["data"];return 200===e?{data:a,code:e}:t}async addDependRule(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependRule/addDependRule",e))["data"];return 200===e?{data:a,code:e}:t}async updateDependRule(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependRule/updateDependRule",e))["data"];return 200===e?{data:a,code:e}:t}async deleteDependRule(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependRule/deleteDependRule",e))["data"];return 200===e?{data:a,code:e}:t}async addDependDataBatch(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependData/addDependDataBatch",e))["data"];return 200===e?{data:a,code:e}:t}async updateDependData(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependData/updateDependData",e))["data"];return 200===e?{data:a,code:e}:t}async deleteDependData(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependData/deleteDependData",e))["data"];return 200===e?{data:a,code:e}:t}async deleteDependData(e){var{code:e,data:a,msg:t}=(await l.K.post("/colorful-fog/dependData/deleteDependData",e))["data"];return 200===e?{data:a,code:e}:t}}},24061:function(e,a,t){t.r(a),t.d(a,{default:function(){return X}}),t(57658);var l=t(73396),o=t(87139),d=t(44870),r=t(81081),n=t(88490),i=t(44385),s=t(12862),c=t(22483),u=t(82134),p=t(96425);a=e=>((0,l.dD)("data-v-a8eea976"),e=e(),(0,l.Cn)(),e);const m={class:"header"},h={class:"route"},g={class:"route",style:{color:"#999"}},w={class:"detail"},f={class:"table",style:{width:"100%"}},y={class:"card-header"},v=a((()=>(0,l._)("span",{style:{width:"120px"}},"定义分类的名词",-1))),D={key:0,class:"append"},S=a((()=>(0,l._)("div",{class:"card-header"},[(0,l._)("span",null,"分类规则说明")],-1))),b={style:{padding:"0px 0px 0px 10px",width:"100%"}},k={class:"detail-table"},_=a((()=>(0,l._)("div",{class:"card-header"},[(0,l._)("span",null,"将名词分类")],-1))),C=a((()=>(0,l._)("div",{class:"card-header"},[(0,l._)("span",null,"①"),(0,l._)("span",{class:"tip ml10"},[(0,l._)("span",{class:"mr10"},'"其他!":'),(0,l.Uk)(" 需要处理分类表中的其他情况，作为兜底或者某些特殊的分类时需要用到 ")])],-1))),$=a((()=>(0,l._)("div",{class:"card-header"},[(0,l._)("span",null,"②"),(0,l._)("span",{class:"tip ml10"},[(0,l._)("span",{class:"mr10"},'"$key":'),(0,l.Uk)(' 分类结果填的是"$key"时，转换的结果将会和传入的key相等，可用于对字段的拼接 ')])],-1))),x={class:"data-filter"},U={class:"extend-handle"},W={class:"extend-handle-left"},N={class:"extend-handle-right pr10 flex-center"},F={class:"inline-block ml10",style:{"font-weight":"500","font-size":"14px"}},z=a((()=>(0,l._)("span",{style:{color:"red"}}," 取值来源：",-1))),T=a((()=>(0,l._)("div",null," 单一名词直接按照描述填写数据 ",-1))),E=a((()=>(0,l._)("div",null,"如果是类别组，选择类别组里面的其中一个",-1))),R=a((()=>(0,l._)("div",{class:"mt10"}," 1、假设，需要分类的数据是 ",-1))),I={class:"mt10"},H=a((()=>(0,l._)("div",{class:"mt10"}," 2、我们就可以构造出一个分类 ",-1))),q={class:"mt10"},j=a((()=>(0,l._)("div",{class:"mt10"}," 1、上一步得到一个名词组合 ",-1))),P={class:"mt10"},V=a((()=>(0,l._)("div",{class:"mt10"}," 2、设定 所属类别 / 具体值 / 具体系数： ",-1))),M={class:"mt10"},O=a((()=>(0,l._)("div",{class:"mt10"}," 我们得到 【JIAXIAN001-良品】和一个值 0.8，它表示 ",-1))),A={class:"mt10"},K=a((()=>(0,l._)("div",{class:"mt10"}," 我们就可以点击导入了 ",-1))),B=a((()=>(0,l._)("div",null," 例如：需分类的字段【体积】 ",-1))),G=a((()=>(0,l._)("div",{class:"mt10"}," 我们得到 【5-10】 和一个值 【大件】 ，它表示 ",-1))),Z={class:"mt10"},Y=a((()=>(0,l._)("div",{class:"mt10"}," 我们就可以点击导入了 ",-1))),J=a((()=>(0,l._)("div",null," 选择你想要的分类项 ",-1)));a={__name:"relationshipDetail",setup(e){const a=(0,l.FN)()["proxy"],t=(0,c.tv)(),X=(0,c.yj)(),L=(0,d.iH)(`首页 / ${X.query.title} / `),Q=(0,d.iH)(""+X.query.name),ee=(0,d.iH)(!1),ae=(0,d.iH)(!1),te=(0,d.iH)(!1),le=(0,d.iH)(),oe=(0,d.iH)(),de=(0,d.iH)(),re=(0,d.iH)(),ne=(0,d.iH)(),ie=(0,d.iH)(),se=(0,d.iH)(),ce=(0,d.iH)(),ue=(0,d.iH)();(0,d.iH)();const pe=(0,d.iH)(),me=(0,d.iH)(null),he=(0,d.iH)(null),ge=(0,d.iH)(null),we=[{label:"源数据表",value:"TABLE"},{label:"方案字段",value:"SCHEME"}],fe=()=>{a.$alert("即将离开当前编辑页，未保存的数据将失效","提示",{confirmButtonText:"确认离开",type:"warning",icon:"InfoFilled",callback:e=>{"confirm"===e&&t.go(-1)}})},ye=((0,l.wF)((()=>{ye(),$e.push(..."SORT"===X.query.dependType?[{label:"选择单一名词（按名词分类）",value:"SORT"}]:[{label:"选择单一名词（按范围分类）",value:"RANGE"}])})),async()=>{he.value=new u.o({tableHeader:xe(),selectUri:"/colorful-fog/dependRule/select",pageSize:100}),he.value.searchData={dependCode:X.query.dependCode},he.value.forMatData=Ce,he.value.initData=async(e=he.value,a,t)=>{let{data:l,code:o}=(await r.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===o&&(e.total=l.pageInfo.total,e.tableData.length=0,e.tableData.push(...l.pageInfo.list),0===Se.value.length&&(Se.value=l.pageInfo.list.filter(((e,a)=>l.pageInfo.list.findIndex((a=>a.schemeName===e.schemeName))===a))),0===he.value.tableData.length&&0!==Se.value.length&&(Se.value=[],De(null)),a?.clearSelection())},ge.value=new u.o({selectUri:"/colorful-fog/dependData/select",pageSize:20}),ge.value.searchData={dependCode:X.query.dependCode},ge.value.forMatData=Ce,ge.value.initData=async(e=ge.value,a)=>{var{data:t,code:l}=(await r.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===l&&(e.total=t.pageInfo.total,e.tableData.length=0,t.pageInfo.list.forEach((a=>{a.rangeStart=a.rangeStart+","+a.rangeEnd,e.tableData.push(a)})),a?.clearSelection())}}),ve=()=>{Se.value.length=0,De(null)},De=e=>{me.value=e,he.value.searchData={dependCode:X.query.dependCode,schemeName:e?.split(" && ")[0]},he.value.initData()},Se=(0,d.iH)([]),be=({idx:e,row:t})=>{t.id?a.$alert("是否确认删除该条数据","提示",{type:"error",icon:"InfoFilled",confirmButtonText:"确定",callback:e=>{"confirm"===e&&ge.value.deleteDependData([t.id]).then((e=>{200===e.code&&(a.$message.success("删除成功"),ge.value.initData(this,a.$refs.table))}))}}):ge.value.tableData.splice(e,1)},ke=({row:e})=>{a.$alert("是否确认删除该规则？","提示",{type:"error",icon:"InfoFilled",confirmButtonText:"确定",callback:t=>{"confirm"===t&&ge.value.deleteDependRule([e.id]).then((e=>{200===e.code&&a.$alert("删除成功","提示",{type:"success",icon:"InfoFilled",showCancelButton:!1,callback:()=>{Se.value=[],he.value.initData(this,a.$refs.table)}})}))}})};let _e={SORT:"单一名词（按名词分类）",RANGE:"单一名词（按范围分类）",DEPEND:"类别组",OTHER:"其他"};const Ce=(e,a)=>"dependType"===a.property?_e[e[a.property]]:"orderFieldName"===a.property?e.secondDependCode?(0,l.h)("span",{ref:e=>le.value=e,class:"show-detail",onClick:Oe.bind(this,e.secondDependCode)},"点击查看具体分类数据"):`【${e.orderName}】中的【${e[a.property]}】(${e.orderField})`:e[a.property]||"-",$e=(0,d.qj)([]),xe=()=>[],Ue=e=>{var{range:e,value:t,key:l}=e,l={key:l,dependCode:X.query.dependCode,value:t,range:e};ge.value.search(l,this,a.$refs.table)},We=()=>{var e=ge.value.tableData.filter((e=>(e.id||e.rangeStart&&(e.rangeEnd=e.rangeStart.split(",")[1],e.rangeStart=e.rangeStart.split(",")[0]),!e.id))),t=ge.value.tableData.filter((e=>(e.id&&e.rangeStart&&(e.rangeEnd=e.rangeStart.split(",")[1],e.rangeStart=e.rangeStart.split(",")[0]),e.id)));0!==e.length&&ge.value.addDependDataBatch(e).then((e=>{200===e.code&&(a.$notify({title:"执行了新增操作",message:"新增保存成功",type:"success"}),ge.value.initData(this,a.$refs.table))})),0!==t.length&&ge.value.updateDependData(t).then((e=>{200===e.code&&(a.$notify({title:"执行了更新操作",message:"更新保存成功",type:"success"}),ge.value.initData(this,a.$refs.table))}))},Ne=()=>{0===ge.value.selections.length?a.$message.error("请选择数据"):a.$alert("是否确认删除？","提示",{type:"error",icon:"InfoFilled",confirmButtonText:"确定",callback:e=>{"confirm"===e&&(e=ge.value.selections.map((e=>e.id)),ge.value.deleteDependData(e).then((e=>{200===e.code&&a.$alert("删除成功","提示",{type:"success",icon:"InfoFilled",showCancelButton:!1,callback:()=>{ge.value.initData(this,a.$refs.table)}})})))}})},Fe=()=>{ge.value.tableData.unshift({dependCode:X.query.dependCode})},ze=(0,d.iH)(!1),Te=e=>{ze.value=!1,Re.value={dependCode:X.query.dependCode,dependType:e,getDataFrom:"SCHEME"},"SORT"!==e&&"RANGE"!==e||(Ie.formInputEl=[{title:"选择一个方案",key:"schemeName",element:"input",type:"dialog"},{title:"选择方案中的字段",key:"orderFieldNameScheme",element:"input",type:"dialog"}]),He=(0,d.IU)(Re.value),Ie.isShow=!0,me.value&&(Re.value.schemeCode=me.value.split(" && ")[1],Re.value.schemeName=me.value.split(" && ")[0],qe("orderFieldNameScheme"))},Ee=({row:e})=>{"SORT"===e.dependType||"RANGE"===e.dependType?"Table"===e.getDataFrom?Ie.formInputEl=[{title:"选择单据表",key:"orderName",element:"input",type:"dialog"},{title:"选择表中某个字段",key:"orderFieldName",element:"input",type:"dialog"}]:Ie.formInputEl=[{title:"选择一个方案",key:"schemeName",element:"input",type:"dialog"},{title:"选择方案中的字段",key:"orderFieldNameScheme",element:"input",type:"dialog"}]:Ie.formInputEl=[{title:"要依赖哪个分类",key:"secondDependCode",element:"input",type:"dialog"}],Re.value=e,Re.value.orderFieldNameScheme=Re.value.orderFieldName,He=(0,d.IU)(Re.value),Ie.isShow=!0},Re=(0,d.iH)({}),Ie=(0,d.qj)({isShow:!1,formInputEl:[],formSelectEl:[],formTextAreaEl:[],formTimeAndNumber:[],emitOpenDialog:e=>{qe(e)},inputDone:e=>{e.id?ge.value.updateDependRule([e]).then((e=>{200===e.code&&(Ie.isShow=!1,a.$message.success("更新成功"),he.value.initData(this,a.$refs.table))})):ge.value.addDependRule([e]).then((e=>{200===e.code&&(Ie.isShow=!1,a.$message.success("新增成功"),he.value.initData(this,a.$refs.table))}))}});let He={};const qe=async e=>{switch(je.useChoose=!0,e){case"orderName":return je.searchPlaceholde="输入单据名称进行搜索",je.chooseRow=e=>{He.orderTable=e.orderTable,a.$refs.dialogForm.updateDialogInput({orderName:e.orderName,orderTable:e.orderTable}),je.isShow=!1},je.doSearch=e=>{je.dataSource.searchData={},e&&(je.dataSource.searchData.orderName=e),je.dataSource.initData()},je.dataSource=new u.o({selectUri:"/colorful-fog/orderTable/select",tableHeader:[{label:"单据名称",prop:"orderName",width:200},{label:"单据关联表",prop:"orderTable",width:200},{label:"单据关联表名称",prop:"orderTableName",width:200},{label:"类型",prop:"type",width:200}],pageSize:10}),je.dataSource.forMatData=(e,a)=>"type"===a.property?"MAIN"===e[a.property]?"主表":"明细":e[a.property]??"-",await je.dataSource.initData(),void(je.isShow=!0);case"orderFieldName":return Re.value.orderTable?(je.searchPlaceholde="输入字段名进行搜索",je.chooseRow=e=>{a.$refs.dialogForm.updateDialogInput({orderFieldName:e.fieldName,orderField:e.field}),je.isShow=!1},je.doSearch=e=>{je.dataSource.searchData={tableName:He.orderTable},e&&(je.dataSource.searchData.fieldName=e),je.dataSource.initData()},je.dataSource=new u.o({selectUri:"/colorful-fog/tableFiled/select",tableHeader:[{label:"字段名",prop:"fieldName",width:200},{label:"字段key",prop:"field",width:200}],pageSize:10}),je.dataSource.forMatData=(e,a)=>e[a.property]??"-",je.dataSource.searchData={tableName:He.orderTable},await je.dataSource.initData(),void(je.isShow=!0)):void a.$message.error("请先选择选择名词所在表");case"secondDependCode":return je.searchPlaceholde="输入分类关系名称搜索",je.chooseRow=e=>{a.$refs.dialogForm.updateDialogInput({secondDependCode:e.dependCode}),je.isShow=!1},je.doSearch=e=>{je.dataSource.searchData={},e&&(je.dataSource.searchData.name=e),je.dataSource.initData()},je.dataSource=new u.o({selectUri:"/colorful-fog/dependMain/list",tableHeader:[{label:"依赖关系名称",prop:"name",width:200},{label:"依赖Code",prop:"dependCode",width:200}],pageSize:10}),je.dataSource.forMatData=(e,a)=>e[a.property]??"-",je.dataSource.searchData={},await je.dataSource.initData(),void(je.isShow=!0);case"schemeName":return je.searchPlaceholde="输入方案名称搜索",je.chooseRow=e=>{e.children||(He.schemeCode=e.schemeCode,He.schemeName=e.schemeName,a.$refs.dialogForm.updateDialogInput({schemeName:e.name,schemeCode:e.schemeCode}),je.isShow=!1)},je.doSearch=e=>{je.dataSource.searchData={},e&&(je.dataSource.searchData.name=e),je.dataSource.initData()},je.dataSource=new u.o({selectUri:"/colorful-fog/schemeMain/selectMenu",tableHeader:[{label:"方案名称",prop:"name",width:200},{label:"方案Code",prop:"schemeCode",width:200}],pageSize:10}),je.dataSource.forMatData=(e,a)=>e[a.property]??"-",je.dataSource.searchData={},je.dataSource.initData=async(e=je.dataSource)=>{var{data:e,code:a}=(await r.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===a&&(je.dataSource.tableData.length=0,a=Object.entries(e).reduce(((e,a,t)=>(a={name:a[0],children:a[1],id:t+1,schemeCode:"-"},e.push(a),e)),[]),je.dataSource.tableData.push(...a),je.dataSource.total=je.dataSource.tableData.length)},await je.dataSource.initData(),void(je.isShow=!0);case"orderFieldNameScheme":return je.searchPlaceholde="输入字段名称搜索",je.chooseRow=e=>{a.$refs.dialogForm.updateDialogInput({orderFieldName:e.resultName,orderField:e.resultCode,orderFieldNameScheme:e.resultName}),je.isShow=!1},je.doSearch=e=>{je.dataSource.searchData={schemeCode:He.schemeCode},e&&(je.dataSource.searchData.name=e),je.dataSource.initData()},je.dataSource=new u.o({selectUri:"/colorful-fog/schemeDetail/select",tableHeader:[{label:"字段名称",prop:"resultName",width:200},{label:"字段Code",prop:"resultCode",width:200}],pageSize:10}),je.dataSource.forMatData=(e,a)=>e[a.property]??"-",je.dataSource.searchData={schemeCode:He.schemeCode},await je.dataSource.initData(),void(je.isShow=!0);default:je.useChoose=!1,je.searchPlaceholde="输入类别名称搜索",je.chooseRow=e=>{a.$refs.dialogForm.updateDialogInput({secondDependCode:e.dependCode}),je.isShow=!1},je.doSearch=e=>{je.dataSource.searchData={},e&&(je.dataSource.searchData.name=e),je.dataSource.initData()},je.dataSource=new u.o({selectUri:"/colorful-fog/dependData/select",tableHeader:[{label:"分类的名词",prop:"key",width:200},{label:"开始值",prop:"rangeStart",width:200},{label:"结束值",prop:"rangeEnd",width:200},{label:"分类",prop:"value",width:200}],pageSize:10}),je.dataSource.forMatData=(e,a)=>e[a.property]??"-",je.dataSource.searchData={dependCode:e},await je.dataSource.initData(),je.isShow=!0}},je=(0,d.qj)({isShow:!1,dataSource:null,searchPlaceholde:"",doSearch:e=>{},chooseRow:e=>{}}),Pe=e=>"SORT"===X.query.dependType?e.map((e=>({key:Object.keys(e).slice(0,-1).reduce(((a,t,l)=>a+(0<l?"[-]":"")+e[t]),""),value:e["转换结果值"],dependCode:X.query.dependCode}))):e.map((e=>({rangeStart:e["起始值,结束值（开区间和闭区间，请用【,(英文逗号)】隔开）"].split(","[0])[0],rangeEnd:e["起始值,结束值（开区间和闭区间，请用【,(英文逗号)】隔开）"].split(","[0])[1],key:e["起始值,结束值（开区间和闭区间，请用【,(英文逗号)】隔开）"],value:e["转换结果值"],dependCode:X.query.dependCode}))),Ve=async e=>{e=await(new a.$DataTool).xlsx2DataObject(e.raw);let t=Pe(e);a.$alert("是否确认导入？","提示",{type:"info",icon:"InfoFilled",confirmButtonText:"确定",callback:e=>{"confirm"===e&&ge.value.addDependDataBatch(t).then((e=>{200===e.code&&a.$alert("导入成功","提示",{type:"success",icon:"InfoFilled",showCancelButton:!1,callback:()=>{ge.value.initData(this,a.$refs.table)}})}))}})},Me=()=>{"SORT"===X.query.dependType&&(window.location="https://jxwlapp.oss-cn-guangzhou.aliyuncs.com/excelTemplate/名词分类导入模板.xlsx?download"),"RANGE"===X.query.dependType&&(window.location="https://jxwlapp.oss-cn-guangzhou.aliyuncs.com/excelTemplate/范围分类导入模板.xlsx?download")},Oe=(e,a)=>{qe(e)},Ae=()=>{0===he.value.tableData.length?a.$message.error("先添加一条规则吧"):"RANGE"===X.query.dependType?ae.value=!0:ee.value=!0},Ke=e=>{Re.value.getDataFrom=e,a.$refs.dialogForm.updateDialogInput({getDataFrom:e}),"SCHEME"!==e&&(Ie.formInputEl=[{title:"选择分类项所在表",key:"orderName",element:"input",type:"dialog"},{title:"选择表中某个字段",key:"orderFieldName",element:"input",type:"dialog"}])};return(e,a)=>{var t=(0,l.up)("el-page-header");const r=(0,l.up)("arrow-down"),c=(0,l.up)("el-icon"),ye=(0,l.up)("el-button"),_e=(0,l.up)("el-dropdown-item"),Ce=(0,l.up)("el-dropdown-menu"),xe=(0,l.up)("el-dropdown"),ze=(0,l.up)("el-link"),He=(0,l.up)("el-tag"),qe=(0,l.up)("el-table-column"),Pe=(0,l.up)("CirclePlus");var Be=(0,l.up)("el-card");const Ge=(0,l.up)("el-descriptions-item"),Ze=(0,l.up)("el-descriptions"),Ye=(0,l.up)("el-upload"),Je=(0,l.up)("el-space"),Xe=(0,l.up)("el-input"),Le=(0,l.up)("el-option"),Qe=(0,l.up)("el-select"),ea=(0,l.up)("el-tour-step"),aa=(0,l.up)("el-image");var ta=(0,l.up)("el-tour");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",m,[(0,l.Wm)(t,{onBack:fe},{content:(0,l.w5)((()=>[(0,l._)("span",h,(0,o.zw)(L.value),1),(0,l._)("span",g,(0,o.zw)(Q.value),1)])),_:1})]),(0,l._)("div",w,[(0,l._)("div",f,[(0,l.Wm)(Be,{class:"box-card",shadow:"hover"},{header:(0,l.w5)((()=>[(0,l._)("div",y,[v,(0,l.Wm)(xe,{trigger:"click",style:{color:"#FFFFFF"},onCommand:Te},{dropdown:(0,l.w5)((()=>[(0,l.Wm)(Ce,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)($e,(e=>((0,l.wg)(),(0,l.j4)(_e,{key:e.value,command:e.value},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.label),1)])),_:2},1032,["command"])))),128))])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(ye,{size:"small",class:"handle-btn",color:"#4a78bd",style:{color:"#666"},plain:""},{default:(0,l.w5)((()=>[(0,l.Uk)(" 新增分类方案 "),(0,l.Wm)(c,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(xe,{ref_key:"step00",ref:pe,trigger:"click",style:{color:"#FFFFFF"},onCommand:De},{dropdown:(0,l.w5)((()=>[(0,l.Wm)(Ce,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Se.value,(e=>((0,l.wg)(),(0,l.j4)(_e,{key:e.schemeCode,command:e.schemeName+" && "+e.schemeCode},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.schemeName),1)])),_:2},1032,["command"])))),128))])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(ye,{size:"small",class:"handle-btn ml10",color:"#4a78bd",style:{color:"#666"},plain:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(me.value??"选择已有方案")+" ",1),(0,l.Wm)(c,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1})])),_:1})])),_:1},512),(0,l.Wm)(ye,{size:"small",class:"ml10",type:"warning",style:{color:"#666"},plain:"",onClick:ve},{default:(0,l.w5)((()=>[(0,l.Uk)(" 重置刷新 ")])),_:1})])])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(p.Z,{"use-edit":"","use-delete":"","use-check-box":!1,"data-source":he.value,loading:(0,d.SU)(u.V)&&!Ie.isShow&&!je.isShow,onHandleEdit:Ee,onHandleDelete:ke},{customColumnEnd:(0,l.w5)((()=>[(0,l.Wm)(qe,{label:"需分类的数据",prop:"orderFieldName",align:"center","show-overflow-tooltip":""},{default:(0,l.w5)((e=>["SORT"===e.row.dependType?((0,l.wg)(),(0,l.j4)(ze,{key:0,ref_key:"step1",ref:le},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(`【${e.row.orderName??e.row.schemeName}】中的【${e.row.orderFieldName}】(${e.row.orderField})`),1)])),_:2},1536)):(0,l.kq)("",!0),"RANGE"===e.row.dependType?((0,l.wg)(),(0,l.j4)(ze,{key:1,ref_key:"step01",ref:ce},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(`【${e.row.orderName??e.row.schemeName}】中的【${e.row.orderFieldName}】(${e.row.orderField})`),1)])),_:2},1536)):(0,l.kq)("",!0),"DEPEND"===e.row.dependType?((0,l.wg)(),(0,l.j4)(He,{key:2,ref_key:"step2",ref:oe,class:"show-detail",onClick:a=>Oe(e.row.secondDependCode,e)},{default:(0,l.w5)((()=>[(0,l.Uk)(" 点击查看类别组具体有哪些类别 ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])),_:1})])),_:1},8,["data-source","loading"]),me.value?((0,l.wg)(),(0,l.iD)("div",D,[(0,l.Wm)(c,{class:"append-options",title:"为此方案添加一个分类",onClick:a[0]||(a[0]=e=>Te((0,d.SU)(X).query.dependType))},{default:(0,l.w5)((()=>[(0,l.Wm)(Pe)])),_:1})])):(0,l.kq)("",!0)])])),_:1}),0!==he.value.tableData.length?((0,l.wg)(),(0,l.j4)(Be,{key:0,class:"box-card mt20",shadow:"hover"},{header:(0,l.w5)((()=>[S])),default:(0,l.w5)((()=>[(0,l._)("div",b,[(0,l.Wm)(Ze,{title:"",column:2},{default:(0,l.w5)((()=>[(0,l.Wm)(Ge,{label:"你需要输入"},{default:(0,l.w5)((()=>[(0,l.Wm)(He,{type:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)("SORT"===(0,d.SU)(X).query.dependType?"某个 【名词组合】，并且你希望这个 【名词组合】 是属于什么类别":"某个范围的【起始值】和【结束值】，并且你希望它属于什么【类别】"),1)])),_:1})])),_:1}),(0,l.Wm)(Ge,{label:"会产生的结果"},{default:(0,l.w5)((()=>[(0,l.Wm)(He,{type:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 未来会按照分类区分计费方式 ")])),_:1})])),_:1}),"SORT"===(0,d.SU)(X).query.dependType?((0,l.wg)(),(0,l.j4)(Ge,{key:0,label:"名词组合规则"},{default:(0,l.w5)((()=>[(0,l.Wm)(He,{type:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 每个名词请用 【-】 连接 ")])),_:1})])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(Ge,{label:"如果你不会操作，请看"},{default:(0,l.w5)((()=>[(0,l.Wm)(ye,{plain:"",type:"warning",size:"small",onClick:Ae},{default:(0,l.w5)((()=>[(0,l.Uk)(" 操作指引 ")])),_:1})])),_:1})])),_:1})])])),_:1})):(0,l.kq)("",!0),(0,l._)("div",k,[0!==he.value.tableData.length?((0,l.wg)(),(0,l.j4)(Be,{key:0,class:"box-card mt20",shadow:"hover"},{header:(0,l.w5)((()=>[_,C,$])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l._)("div",x,[(0,l.Wm)(s.Z,{"filter-items":"SORT"===X.query.dependType?[{title:"名词",key:"key",dataKey:"key",type:"text"},{title:"取值",key:"value",dataKey:"value",type:"text"}]:[{title:"范围",key:"range",dataKey:"range",type:"text"},{title:"取值",key:"value",dataKey:"value",type:"text"}],onSearch:Ue},null,8,["filter-items"])]),(0,l._)("div",U,[(0,l._)("div",W,[(0,l.Wm)(ye,{size:"small",class:"handle-btn",color:"#4a78bd",style:{color:"#666"},onClick:Fe},{default:(0,l.w5)((()=>[(0,l.Uk)(" 新增一条数据 ")])),_:1}),(0,l.Wm)(ye,{ref_key:"step5",ref:ne,size:"small",class:"handle-btn",color:"#4a78bd",style:{color:"#666"},onClick:We},{default:(0,l.w5)((()=>[(0,l.Uk)(" 全部保存 ")])),_:1},512)]),(0,l._)("div",N,[(0,l.Wm)(ye,{ref_key:"step6",ref:ie,color:"#5f6368",style:{color:"#FFFFFF"},size:"small",icon:"Download",class:"mr10",circle:"",onClick:Me},null,512),(0,l.Wm)(Ye,{ref_key:"step7",ref:se,class:"inline-block",accept:".xlsx, .xls","on-change":Ve,"show-file-list":!1,"auto-upload":!1},{default:(0,l.w5)((()=>[(0,l.Wm)(ye,{size:"small",class:"handle-btn",color:"#4a78bd",style:{color:"#666"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" 导入数据 ")])),_:1})])),_:1},512),(0,l.Wm)(ye,{size:"small",plain:"",class:"ml12",type:"danger",onClick:Ne},{default:(0,l.w5)((()=>[(0,l.Uk)(" 删除 ")])),_:1})])]),(0,l.Wm)(p.Z,{"use-edit":!1,"use-delete":!0,"use-check-box":"","data-source":ge.value,loading:(0,d.SU)(u.V)&&!Ie.isShow&&!je.isShow,"use-pagination":"",onHandleDelete:be},{customColumn:(0,l.w5)((()=>["SORT"===(0,d.SU)(X).query.dependType?((0,l.wg)(),(0,l.j4)(qe,{key:0,label:"名词组合",prop:"key",align:"center","show-overflow-tooltip":""},{header:(0,l.w5)((()=>[(0,l.Wm)(Je,{ref_key:"step3",ref:de},{default:(0,l.w5)((()=>[(0,l.Uk)(" 名词组合 ")])),_:1},512)])),default:(0,l.w5)((e=>[(0,l.Wm)(Xe,{modelValue:e.row.key,"onUpdate:modelValue":a=>e.row.key=a,placeholder:"请输入名词组合",clearable:"",size:"small"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})):(0,l.kq)("",!0),"RANGE"===(0,d.SU)(X).query.dependType?((0,l.wg)(),(0,l.j4)(qe,{key:1,label:"起始值,结束值",prop:"rangeStart",align:"center","show-overflow-tooltip":""},{header:(0,l.w5)((()=>[(0,l.Wm)(Je,{ref_key:"step02",ref:ue},{default:(0,l.w5)((()=>[(0,l.Uk)(" 起始值,结束值（开区间和闭区间，请用【,(英文逗号)】隔开） ")])),_:1},512)])),default:(0,l.w5)((e=>[(0,l.Wm)(Xe,{modelValue:e.row.rangeStart,"onUpdate:modelValue":a=>e.row.rangeStart=a,placeholder:"请输入起始值-结束值",clearable:"",size:"small"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(qe,{label:"所属类别 / 具体值 / 具体系数",prop:"value",align:"center","show-overflow-tooltip":""},{header:(0,l.w5)((()=>[(0,l.Wm)(Je,{ref_key:"step4",ref:re},{default:(0,l.w5)((()=>[(0,l.Uk)(" 所属类别 / 具体值 / 具体系数 ")])),_:1},512)])),default:(0,l.w5)((e=>[(0,l.Wm)(He,{type:"success",size:"small",class:"mr10"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 属于 ")])),_:1}),(0,l.Wm)(Xe,{modelValue:e.row.value,"onUpdate:modelValue":a=>e.row.value=a,style:{width:"90%"},placeholder:"所属类别 / 具体值 / 具体系数",clearable:"",size:"small"},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data-source","loading"])])])),_:1})):(0,l.kq)("",!0)])])]),Ie.isShow?((0,l.wg)(),(0,l.j4)(i.Z,{key:0,ref:"dialogForm",width:"60%",loading:(0,d.SU)(u.V),"form-data":Re.value,"is-show":Ie.isShow,title:"请填写相关信息","form-input-el":Ie.formInputEl,"form-select-el":Ie.formSelectEl,"form-text-area-el":Ie.formTextAreaEl,"form-upload-el":Ie.formUploadEl,"form-time-and-number":Ie.formTimeAndNumber,onCloseDialog:a[2]||(a[2]=e=>Ie.isShow=!1),onEmitOpenDialog:Ie.emitOpenDialog,onInputDone:Ie.inputDone},{customOperation:(0,l.w5)((()=>[(0,l._)("div",F,[z,(0,l.Wm)(Qe,{modelValue:Re.value.getDataFrom,"onUpdate:modelValue":a[1]||(a[1]=e=>Re.value.getDataFrom=e),style:{width:"220px"},placeholder:"请选择系数类型",disabled:!0,onChange:Ke},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(we,(e=>(0,l.Wm)(Le,{key:e.label,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])])),_:1},8,["loading","form-data","is-show","form-input-el","form-select-el","form-text-area-el","form-upload-el","form-time-and-number","onEmitOpenDialog","onInputDone"])):(0,l.kq)("",!0),je.isShow?((0,l.wg)(),(0,l.j4)(n.Z,{key:1,ref:"dialogSearch","use-choose":!1,"append-table-style":{background:"#126f9e",color:"#fff",borderColor:"rgba(192, 192, 192,.5)"},width:"60%","search-input-placeholder":je.searchPlaceholde,"is-show":je.isShow,"data-source":je.dataSource,title:"选择数据","is-show-search-input":"",loading:(0,d.SU)(u.V),onCloseDialog:a[3]||(a[3]=e=>je.isShow=!1),onDoDialogSearch:je.doSearch,onChooseRow:je.chooseRow},null,8,["append-table-style","search-input-placeholder","is-show","data-source","loading","onDoDialogSearch","onChooseRow"])):(0,l.kq)("",!0),(0,l.Wm)(ta,{modelValue:ee.value,"onUpdate:modelValue":a[4]||(a[4]=e=>ee.value=e),"close-on-press-escape":!1},{default:(0,l.w5)((()=>[le.value&&le.value.$el?((0,l.wg)(),(0,l.j4)(ea,{key:0,target:le.value?.$el,title:"查看需要分类的数据"},{default:(0,l.w5)((()=>[T])),_:1},8,["target"])):(0,l.kq)("",!0),oe.value&&oe.value.$el?((0,l.wg)(),(0,l.j4)(ea,{key:1,target:oe.value?.$el,title:"查看需要分类的数据"},{default:(0,l.w5)((()=>[(0,l.Wm)(aa,{src:"https://jxwlapp.oss-cn-guangzhou.aliyuncs.com/teachStep2.png","zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":["https://jxwlapp.oss-cn-guangzhou.aliyuncs.com/teachStep2.png"],"initial-index":4,fit:"cover"},null,8,["preview-src-list"]),E])),_:1},8,["target"])):(0,l.kq)("",!0),(0,l.Wm)(ea,{title:"构造数据",target:de.value?.$el,placement:"top"},{default:(0,l.w5)((()=>[R,(0,l._)("div",I,[(0,l.Wm)(He,{type:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 【物料代码-产品类别(良品、不良品 二选一)】 ")])),_:1})]),H,(0,l._)("div",q,[(0,l.Wm)(He,{type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)(" JIAXIAN001-良品 ")])),_:1})])])),_:1},8,["target"]),(0,l.Wm)(ea,{title:"帮分类设定一个值",target:re.value?.$el,placement:"top"},{default:(0,l.w5)((()=>[j,(0,l._)("div",P,[(0,l.Wm)(He,{type:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)(" JIAXIAN001-良品 ")])),_:1})]),V,(0,l._)("div",M,[(0,l.Wm)(He,{type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 0.8 ")])),_:1})])])),_:1},8,["target"]),(0,l.Wm)(ea,{title:"最后记得点击保存",target:ne.value?.$el,placement:"top"},{default:(0,l.w5)((()=>[O,(0,l._)("div",A,[(0,l.Wm)(ze,{type:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 【JIAXIAN001-良品】会使用0.8这个系数计算金额 ")])),_:1})])])),_:1},8,["target"]),(0,l.Wm)(ea,{title:"明白上面的意思后，我们也可以",target:ie.value?.$el,placement:"left"},{default:(0,l.w5)((()=>[(0,l.Wm)(ye,{type:"primary",size:"small",onClick:Me},{default:(0,l.w5)((()=>[(0,l.Uk)(" 下载导入模板 ")])),_:1})])),_:1},8,["target"]),(0,l.Wm)(ea,{title:"填好Excel数据后",target:se.value?.$el,placement:"top"},{default:(0,l.w5)((()=>[K])),_:1},8,["target"])])),_:1},8,["modelValue"]),(0,l.Wm)(ta,{modelValue:ae.value,"onUpdate:modelValue":a[5]||(a[5]=e=>ae.value=e),"close-on-press-escape":!1},{default:(0,l.w5)((()=>[(0,l.Wm)(ea,{target:ce.value?.$el,title:"查看需分类的数据是哪个字段"},{default:(0,l.w5)((()=>[B])),_:1},8,["target"]),(0,l.Wm)(ea,{target:ue.value?.$el,title:"输入一个起始值和结束值，分为开区间和闭区间",placement:"top"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(He,{type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 假设输入 - > (5,10) ")])),_:1})])])),_:1},8,["target"]),(0,l.Wm)(ea,{target:re.value?.$el,title:"帮这个范围设定一个值",placement:"top"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(He,{type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 假设输入 - > 大件 ")])),_:1})])])),_:1},8,["target"]),(0,l.Wm)(ea,{target:ne.value?.$el,title:"最后记得点击保存",placement:"top"},{default:(0,l.w5)((()=>[G,(0,l._)("div",Z,[(0,l.Wm)(ze,{type:"danger"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 【5-10】这个范围属于 【大件】 ")])),_:1})])])),_:1},8,["target"]),(0,l.Wm)(ea,{title:"明白上面的意思后，我们也可以",target:ie.value?.$el,placement:"left"},{default:(0,l.w5)((()=>[(0,l.Wm)(ye,{type:"primary",size:"small",onClick:Me},{default:(0,l.w5)((()=>[(0,l.Uk)(" 下载导入模板 ")])),_:1})])),_:1},8,["target"]),(0,l.Wm)(ea,{title:"填好Excel数据后",target:se.value?.$el,placement:"top"},{default:(0,l.w5)((()=>[Y])),_:1},8,["target"])])),_:1},8,["modelValue"]),(0,l.Wm)(ta,{modelValue:te.value,"onUpdate:modelValue":a[6]||(a[6]=e=>te.value=e),"close-on-press-escape":!1},{default:(0,l.w5)((()=>[(0,l.Wm)(ea,{target:pe.value?.$el,title:"先创建一个分类规则吧！"},{default:(0,l.w5)((()=>[J])),_:1},8,["target"])])),_:1},8,["modelValue"])])}}};var X=(0,t(40089).Z)(a,[["__scopeId","data-v-a8eea976"]])},96425:function(e,a,t){t.d(a,{Z:function(){return n}});var l=t(73396),o=t(44870);const d={class:"table"},r={key:0,class:"page"};a={__name:"dataTable",props:{dataSource:{type:Object,default:null},loading:{type:Boolean,default:!1},useDelete:{type:Boolean,default:!1},useEdit:{type:Boolean,default:!1},useCheckBox:{type:Boolean,default:!1},usePagination:{type:Boolean,default:!1}},emits:["handleEdit","handleDelete"],setup(e,{expose:a,emit:t}){const n=e,i=(0,l.FN)()["proxy"],s=((0,l.wF)((()=>{s()})),()=>{n.dataSource&&n.dataSource.initData(this,i.$refs.tableRef)}),c=({})=>({height:"35px",borderColor:"rgba(192, 192, 192,.5)",fontSize:"15px"}),u=e=>e.id,p=e=>{n.dataSource.currentPageChange(e,this,i.$refs.tableRef,!0)};return a({clearSelection:()=>{i.$refs.tableRef.clearSelection()}}),(a,n)=>{const s=(0,l.up)("el-table-column"),m=(0,l.up)("el-button");var h=(0,l.up)("el-table"),g=(0,l.up)("el-pagination"),w=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",d,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(h,{ref:"tableRef",class:"table-class","highlight-current-row":"",fix:"",border:"",stripe:"",style:{width:"100%"},data:e.dataSource.tableData,"row-style":c,"cell-style":{padding:"0",borderColor:"rgba(192, 192, 192,.5)"},"row-key":u,"header-cell-style":{background:"#f3f3f3",color:"#000",borderColor:"rgba(192, 192, 192,.5)",fontWeight:"800",fontSize:"15px"},"header-row-style":{borderColor:"rgba(192, 192, 192,.5)"},onSelectionChange:n[0]||(n[0]=a=>e.dataSource.selectionChange(a,e.dataSource))},{default:(0,l.w5)((()=>[e.useCheckBox?((0,l.wg)(),(0,l.j4)(s,{key:0,type:"selection",width:"55",align:"center",fixed:"left"})):(0,l.kq)("",!0),(0,l.WI)(a.$slots,"customColumn"),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.dataSource.tableHeader,(a=>((0,l.wg)(),(0,l.j4)(s,{key:a.key,fixed:a.isFixed,label:a.title,width:a.width,prop:a.key,formatter:e.dataSource.forMatData,align:"center","show-overflow-tooltip":""},null,8,["fixed","label","width","prop","formatter"])))),128)),(0,l.WI)(a.$slots,"customColumnEnd"),e.useEdit||e.useDelete?((0,l.wg)(),(0,l.j4)(s,{key:1,label:"操作",align:"center",width:200},{default:(0,l.w5)((a=>[e.useEdit?((0,l.wg)(),(0,l.j4)(m,{key:0,title:"编辑",type:"primary",icon:"Edit",text:"",style:{padding:"0",margin:"0",background:"transparent","margin-right":"30px"},class:"hover-animation",size:"small",onClick:e=>{var l,o;l=a.$index,o=a.row,t("handleEdit",{idx:l,row:o})}},null,8,["onClick"])):(0,l.kq)("",!0),e.useDelete?((0,l.wg)(),(0,l.j4)(m,{key:1,class:"hover-animation",title:"编辑",type:"danger",icon:"Delete",text:"",style:{padding:"0",margin:"0",background:"transparent"},size:"small",onClick:e=>{var l,o;l=a.$index,o=a.row,t("handleDelete",{idx:l,row:o})}},null,8,["onClick"])):(0,l.kq)("",!0)])),_:1})):(0,l.kq)("",!0)])),_:3},8,["data","cell-style","header-cell-style","header-row-style"])),[[w,e.loading]])]),e.usePagination?((0,l.wg)(),(0,l.iD)("div",r,[(0,l.Wm)(g,{"current-page":e.dataSource.currentPage,"onUpdate:currentPage":n[1]||(n[1]=a=>e.dataSource.currentPage=a),"page-size":e.dataSource.pageSize,"onUpdate:pageSize":n[2]||(n[2]=a=>e.dataSource.pageSize=a),small:"",background:"","default-current-page":1,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,50,100,500],total:e.dataSource.total,onSizeChange:n[3]||(n[3]=a=>e.dataSource.pageSizeChange(a,e.dataSource,(0,o.SU)(i).$refs.tableRef)),onCurrentChange:p},null,8,["current-page","page-size","total"])])):(0,l.kq)("",!0)],64)}}};var n=(0,t(40089).Z)(a,[["__scopeId","data-v-c9c224d8"]])}}]);