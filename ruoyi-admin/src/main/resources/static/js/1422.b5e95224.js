"use strict";(self.webpackChunksystem=self.webpackChunksystem||[]).push([[1422,566,9653],{20566:function(e,l,a){a(57658),a(21703);var t=a(81081),o=a(82883);a(68521);const n=o.default["_state"];l.Z=class{constructor({modules:e="",selectUri:l="/",deleteUri:a="/",selectOneUri:t="/",pageSize:o=20,tableHeader:n=[]}={}){this.modules=e,this.selectUri=l,this.selectOneUri=t,this.deleteUri=a,this.searchData={},this.currentPage=1,this.pageSize=o,this.total=0,this.tableData=[],this.tableHeader=n,this.selections=[]}async initData(e=this,l){var{data:a,code:o}=(await t.K.post(`${e.selectUri}?pageNum=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===o&&(e.total=a.total,e.tableData.length=0,e.tableData.push(...a.rows),l?.clearSelection())}currentPageChange(e,l=this,a){l.currentPage=e,l.initData(l,a)}pageSizeChange(e,l=this,a){l.currentPage=1,l.pageSize=e,l.initData(l,a)}search(e,l=this,a){l.searchData=e,l.currentPage=1,l.initData(l,a,!0)}async delete(e,l,a=this){var{code:e,message:o}=(await t.K.post(""+a.deleteUri,e))["data"];return 200===e?(a.initData(a,l),e):o}selectionChange(e,l=this){l.selections.length=0,l.selections.push(...e)}initTableHeader(e=this){if(0===e.tableHeader.length){if(0===e.modules.length||!n.data[e.modules])throw new Error("获取store中的表头, 请提供modules名");e.tableHeader.length=0,e.tableHeader.push(...n.data[e.modules].tableHeader.filter((e=>e.isShow)))}}async selectOne(e,l=this){l=(await t.K.post(l.selectOneUri+"?id="+e))["data"]["data"];return l}}},12862:function(e,l,a){a.d(l,{Z:function(){return g}}),a(57658);var t=a(73396),o=a(44870),n=a(87139),r=a(49242);const u={class:"container"},p={class:"container_common"},i=["title"],s={class:"container_common_senionItems"},d={class:"container_btnGroup"},c={class:"filter-content"},m={class:"filter-content-item"},h=(e=>((0,t.dD)("data-v-2bc5cbae"),e=e(),(0,t.Cn)(),e))((()=>(0,t._)("span",null,"显示最近7天: ",-1))),f={class:"container_common"},y=["title"];l={__name:"dataFilter",props:{filterItems:{type:Object,default(){return[]}},expandFilterItems:{type:Object,default(){return[]}},useDataFilter:{type:Boolean,default:!1},isPad:{type:Boolean,default:!1}},emits:["search","openDialog","currentDayChange"],setup(e,{expose:l,emit:a}){const g=e,v=new Date(2e3,1,1,12,0,0);let b=(0,o.qj)([]),w=(0,o.iH)(g.useDataFilter);const _=()=>{a("currentDayChange",w.value)};let k=(0,o.qj)([]),V=(0,o.qj)([]);function D(){0===b.length?b.push("1"):b.splice(0,1)}function U(e){let l=k.filter((e=>e.value&&0!==e.value.toString().length||0===e.value)),t=(l=l.concat(V.filter((e=>e.value&&0!==e.value.toString().length||0===e.value))),{});if(l.forEach((e=>{-1===e.prop.indexOf("Time")&&-1===e.prop.indexOf("Date")||"daterange"===e.type||"datetimerange"===e.type?t[e.prop]="string"==typeof e.value?e.value.replace(/(^\s*)/g,""):e.value:t[e.prop]=Date.parse(e.value+" 00:00:00")})),"filterValue"===e)return t;a("search",t)}let Y=e=>a("openDialog",e);const S=()=>{k.length=0,V.length=0;let e=[];g.filterItems.forEach((l=>{l.type&&"none"!==l.type&&("processStatus"!==l.dataKey&&!l.prop||"multiple"!==l.type?"daterange"===l.type||"datetimerange"===l.type?e.push({label:l.title||l.label,prop:l.dataKey||l.prop,value:"",type:l.type,options:l.options||[],shortcuts:l.shortcuts||[]}):k.push({label:l.title||l.label,prop:l.dataKey||l.prop,value:"",type:l.type,options:l.options||[]}):k.push({label:l.title||l.label,prop:l.prop,value:"",type:l.type,options:l.options||[]}))})),k.push(...e),window.screen.width,g.isPad?V.push(...k):V.push(...k.splice(4,k.length)),g.expandFilterItems.forEach((e=>{V.unshift({label:e.title||e.label,prop:e.dataKey||e.prop,value:"",type:e.type,options:e.options||[]})}))},K=((0,t.wF)((()=>{S()})),(0,t.YP)((()=>g.filterItems.length),(()=>{S()})),e=>{let l=q(1,29);var a=q(31,59);return l.concat(a)}),j=e=>q(1,59),q=(e,l)=>{var a=[];for(let t=e;t<=l;t++)a.push(t);return a};return l({backfill:(e,l)=>{"expand"===e.type?V[e.index].value=l:k[e.index].value=l},returnFilterValue:()=>U("filterValue")}),(l,g)=>{const S=(0,t.up)("el-input"),q=(0,t.up)("Edit"),C=(0,t.up)("el-icon"),x=(0,t.up)("el-button"),H=(0,t.up)("el-option"),M=(0,t.up)("el-select"),A=(0,t.up)("el-date-picker"),W=(0,t.up)("xButton");var z=(0,t.up)("el-tooltip");const F=(0,t.up)("el-switch");var P=(0,t.up)("el-popover");const O=(0,t.up)("el-collapse-item");var I=(0,t.up)("el-collapse");return(0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("div",p,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(k),((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l,class:"container_common_formArea"},[e.type?((0,t.wg)(),(0,t.iD)("span",{key:0,class:"container_common_formArea-label",title:e.label},(0,n.zw)(e.label)+"：",9,i)):(0,t.kq)("",!0),"text"===e.type?((0,t.wg)(),(0,t.j4)(S,{key:1,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,clearable:"",placeholder:e.placeholder||"请输入"+e.label,class:"container_common_formArea-input",onKeyup:(0,r.D2)(U,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder","onKeyup"])):(0,t.kq)("",!0),"dialog"===e.type?((0,t.wg)(),(0,t.j4)(S,{key:2,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,clearable:"",placeholder:"请选择"+e.label,class:"container_common_formArea-input",onKeyup:(0,r.D2)(U,["enter"])},{append:(0,t.w5)((()=>[(0,t.Wm)(x,{onClick:a=>(0,o.SU)(Y)({type:"default",index:l,prop:e.prop})},{default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(q)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onKeyup"])):(0,t.kq)("",!0),"select"===e.type||"multiple"===e.type?((0,t.wg)(),(0,t.j4)(M,{key:3,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,clearable:"",multiple:Boolean("multiple"===e.type),"collapse-tags":"",class:"container_common_formArea-input",placeholder:"请选择"+e.label},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.options,(e=>((0,t.wg)(),(0,t.j4)(H,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","multiple","placeholder"])):(0,t.kq)("",!0),"date"===e.type?((0,t.wg)(),(0,t.j4)(A,{key:4,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"container_common_formArea-input",type:"date",placeholder:"请选择"+e.label,"default-time":(0,o.SU)(v),"value-format":"YYYY/MM/DD"},null,8,["modelValue","onUpdate:modelValue","placeholder","default-time"])):(0,t.kq)("",!0),"daterange"===e.type||"datetimerange"===e.type?((0,t.wg)(),(0,t.j4)(A,{key:5,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"container_common_formArea-input",type:e.type,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","default-time":(0,o.SU)(v),"value-format":"datetimerange"===e.type?"YYYY/MM/DD HH:mm":"YYYY/MM/DD"},null,8,["modelValue","onUpdate:modelValue","type","default-time","value-format"])):(0,t.kq)("",!0)])))),128)),(0,t._)("div",s,[(0,t._)("div",d,[(0,t.Wm)(z,{class:"box-item",effect:"dark",content:"按回车可以直接执行搜索",placement:"bottom"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{class:"",onClick:(0,r.iM)(U,["stop"])},{default:(0,t.w5)((()=>[(0,t.Uk)(" 查询 ")])),_:1},8,["onClick"])])),_:1}),(0,t.Wm)(W,{type:"info",class:"ml10",onClick:g[0]||(g[0]=(0,r.iM)((e=>{var l=1;if(l)for(let a=0;a<k.length;a++)k[a].value="";for(let a=0;a<V.length;a++)V[a].value="";l?a("search",{}):U()}),["stop"]))},{default:(0,t.w5)((()=>[(0,t.Uk)(" 重置 ")])),_:1})]),(0,t.Wm)(W,{type:"warning",class:"ml10",onClick:(0,r.iM)(D,["stop"])},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(0!==(0,o.SU)(b).length?"收起":"更多"),1)])),_:1},8,["onClick"]),e.useDataFilter?((0,t.wg)(),(0,t.j4)(P,{key:0,placement:"bottom",title:"数据过滤器",width:200,trigger:"click",content:"this is content, this is content, this is content"},{reference:(0,t.w5)((()=>[(0,t.Wm)(x,{icon:"Filter",circle:"",size:"small"})])),default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t._)("div",m,[h,(0,t.Wm)(F,{modelValue:(0,o.SU)(w),"onUpdate:modelValue":g[1]||(g[1]=e=>(0,o.dq)(w)?w.value=e:w=e),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949","margin-left":"10px"},onChange:_},null,8,["modelValue"])])])])),_:1})):(0,t.kq)("",!0)])]),(0,t.Wm)(I,{modelValue:(0,o.SU)(b),"onUpdate:modelValue":g[2]||(g[2]=e=>(0,o.dq)(b)?b.value=e:b=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(O,{name:"1"},{title:(0,t.w5)((()=>[])),default:(0,t.w5)((()=>[(0,t._)("div",f,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(V),((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l,class:"container_common_formArea"},[e.type?((0,t.wg)(),(0,t.iD)("span",{key:0,class:"container_common_formArea-label",title:e.label},(0,n.zw)(e.label)+"：",9,y)):(0,t.kq)("",!0),"text"===e.type?((0,t.wg)(),(0,t.j4)(S,{key:1,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,clearable:"",placeholder:"请输入"+e.label,class:"container_common_formArea-input",onKeyup:(0,r.D2)(U,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder","onKeyup"])):(0,t.kq)("",!0),"dialog"===e.type?((0,t.wg)(),(0,t.j4)(S,{key:2,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,clearable:"",placeholder:"请选择"+e.label,class:"container_common_formArea-input",onKeyup:(0,r.D2)(U,["enter"])},{append:(0,t.w5)((()=>[(0,t.Wm)(x,{onClick:a=>(0,o.SU)(Y)({type:"expand",index:l,prop:e.prop})},{default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(q)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onKeyup"])):(0,t.kq)("",!0),"select"===e.type?((0,t.wg)(),(0,t.j4)(M,{key:3,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,clearable:"",class:"container_common_formArea-input",placeholder:"上楼"===e.label||"卸货"===e.label?"请选择是否"+e.label:""+e.label},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.options,(e=>((0,t.wg)(),(0,t.j4)(H,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):(0,t.kq)("",!0),"daterange"===e.type||"datetimerange"===e.type?((0,t.wg)(),(0,t.j4)(A,{key:4,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"container_common_formArea-input",type:e.type,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","default-time":(0,o.SU)(v),shortcuts:e.shortcuts,"disabled-minutes":K,"disabled-seconds":j,"value-format":"datetimerange"===e.type?"YYYY/MM/DD HH:mm":"YYYY/MM/DD"},null,8,["modelValue","onUpdate:modelValue","type","default-time","shortcuts","value-format"])):(0,t.kq)("",!0),"date"===e.type?((0,t.wg)(),(0,t.j4)(A,{key:5,modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,class:"container_common_formArea-input",type:"date",placeholder:"请选择"+e.label,"default-time":(0,o.SU)(v),"value-format":"YYYY/MM/DD"},null,8,["modelValue","onUpdate:modelValue","placeholder","default-time"])):(0,t.kq)("",!0)])))),128))])])),_:1})])),_:1},8,["modelValue"])])}}};var g=(0,a(40089).Z)(l,[["__scopeId","data-v-2bc5cbae"]])}}]);