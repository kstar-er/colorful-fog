"use strict";(self.webpackChunksystem=self.webpackChunksystem||[]).push([[6306,566,9653],{20566:function(e,a,t){t(57658),t(21703);var r=t(81081),l=t(82883);t(68521);const o=l.default["_state"];a.Z=class{constructor({modules:e="",selectUri:a="/",deleteUri:t="/",selectOneUri:r="/",pageSize:l=20,tableHeader:o=[]}={}){this.modules=e,this.selectUri=a,this.selectOneUri=r,this.deleteUri=t,this.searchData={},this.currentPage=1,this.pageSize=l,this.total=0,this.tableData=[],this.tableHeader=o,this.selections=[]}async initData(e=this,a){var{data:t,code:l}=(await r.K.post(`${e.selectUri}?pageNum=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===l&&(e.total=t.total,e.tableData.length=0,e.tableData.push(...t.rows),a?.clearSelection())}currentPageChange(e,a=this,t){a.currentPage=e,a.initData(a,t)}pageSizeChange(e,a=this,t){a.currentPage=1,a.pageSize=e,a.initData(a,t)}search(e,a=this,t){a.searchData=e,a.currentPage=1,a.initData(a,t,!0)}async delete(e,a,t=this){var{code:e,message:l}=(await r.K.post(""+t.deleteUri,e))["data"];return 200===e?(t.initData(t,a),e):l}selectionChange(e,a=this){a.selections.length=0,a.selections.push(...e)}initTableHeader(e=this){if(0===e.tableHeader.length){if(0===e.modules.length||!o.data[e.modules])throw new Error("获取store中的表头, 请提供modules名");e.tableHeader.length=0,e.tableHeader.push(...o.data[e.modules].tableHeader.filter((e=>e.isShow)))}}async selectOne(e,a=this){a=(await r.K.post(a.selectOneUri+"?id="+e))["data"]["data"];return a}}},18757:function(e,a,t){t.d(a,{V:function(){return r.V},o:function(){return l}}),t(57658);var r=t(81081);class l extends t(20566).Z{constructor({modules:e="",selectUri:a="/",deleteUri:t="/",selectOneUri:r="/",pageSize:l=20,tableHeader:o}={}){super({modules:e,selectUri:a,deleteUri:t,selectOneUri:r,pageSize:l,tableHeader:o})}async initData(e=this,a){var{data:t,code:l}=(await r.K.post(`${e.selectUri}?currentPage=${e.currentPage}&pageSize=`+e.pageSize,e.searchData))["data"];200===l&&(e.total=t.pageInfo.total,e.tableData.length=0,e.tableData.push(...t.pageInfo.list),a?.clearSelection())}currentPageChange(e,a=this,t){a.currentPage=e,a.initData(a,t)}pageSizeChange(e,a=this,t){a.currentPage=1,a.pageSize=e,a.initData(a,t)}search(e,a=this,t){a.searchData=e,a.currentPage=1,a.initData(a,t,!0)}forMatData(e,a){var t={MAIN:"主表",DETAIL:"明细"};return"type"!==e?a&&0<a.toString().length||"number"==typeof a?a:"-":t[a]||a}async getStructure(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/orderTable/select?currentPage=1&pageSize=1",{tableId:e}))["data"];return 200===e?{data:a,code:e}:t}async deleteStructure(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/orderTable/delete",e))["data"];return 200===e?{data:a,code:e}:t}async addStructure(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/orderTable/add",e))["data"];return 200===e?{data:a,code:e}:t}async addStructureBatch(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/orderTable/addBatch",e))["data"];return 200===e?{data:a,code:e}:t}async updateStructure(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/orderTable/update",e))["data"];return 200===e?{data:a,code:e}:t}async getDetail(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/tableFiled/select?currentPage=1&pageSize=10",{id:e.id}))["data"];return 200===e?{data:a,code:e}:t}async addTableField(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/tableFiled/addTableField",e))["data"];return 200===e?{data:a,code:e}:t}async addTableFields(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/tableFiled/addTableFieldList",e))["data"];return 200===e?{data:a,code:e}:t}async updateTableFiled(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/tableFiled/updateTableField",e))["data"];return 200===e?{data:a,code:e}:t}async addForeignKeys(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/ForeignKey/addBatch",e))["data"];return 200===e?{data:a,code:e}:t}async deleteForeignKeys(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/ForeignKey/delete",e))["data"];return 200===e?{data:a,code:e}:t}async getTable(e){var{code:e,data:a,msg:t}=(await r.K.post("/colorful-fog/orderTable/getTableNameByDataSourceId",e))["data"];return 200===e?{data:a,code:e}:t}}},26306:function(e,a,t){t.r(a),t.d(a,{default:function(){return p}});var r=t(73396),l=t(87139),o=t(44870),d=t(22483),i=t(18757),n=t(96425);const s={class:"header"},c={class:"route"},u={class:"route",style:{color:"#999"}},g={class:"detail"};a={__name:"strucitureDetail",setup(e){var{}=(0,r.FN)();const a=(0,d.tv)(),t=(0,d.yj)(),p=(0,o.iH)(`首页 / ${t.query.title} / `),h=(0,o.iH)(""+t.meta.title),f=(0,o.iH)(null),y=()=>{a.go(-1)},b=((0,r.wF)((()=>{b()})),()=>{f.value=new i.o({tableHeader:[{title:"id",key:"id",width:100},{title:"所属表",key:"tableName",width:200},{title:"字段名",key:"fieldName",width:200},{title:"字段key",key:"field",width:200},{title:"数据类型",key:"type",width:200},{title:"创建时间",key:"createTime",width:200},{title:"创建人",key:"createUser",width:200},{title:"更新时间",key:"updateTime",width:200},{title:"更新人",key:"updateUser",width:200}],selectUri:"/colorful-fog/tableFiled/select",pageSize:200}),f.value.searchData={tableName:t.query.orderTable},f.value.forMatData=w}),w=(e,a)=>e[a.property]||"-";return(e,a)=>{var t=(0,r.up)("el-page-header");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",s,[(0,r.Wm)(t,{onBack:y},{content:(0,r.w5)((()=>[(0,r._)("span",c,(0,l.zw)(p.value),1),(0,r._)("span",u,(0,l.zw)(h.value),1)])),_:1})]),(0,r._)("div",g,[(0,r.Wm)(n.Z,{"data-source":f.value,loading:(0,o.SU)(i.V)},null,8,["data-source","loading"])])])}}};var p=(0,t(40089).Z)(a,[["__scopeId","data-v-20783bc0"]])},96425:function(e,a,t){t.d(a,{Z:function(){return i}});var r=t(73396),l=t(44870);const o={class:"table"},d={key:0,class:"page"};a={__name:"dataTable",props:{dataSource:{type:Object,default:null},loading:{type:Boolean,default:!1},useDelete:{type:Boolean,default:!1},useEdit:{type:Boolean,default:!1},useCheckBox:{type:Boolean,default:!1},usePagination:{type:Boolean,default:!1}},emits:["handleEdit","handleDelete"],setup(e,{expose:a,emit:t}){const i=e,n=(0,r.FN)()["proxy"],s=((0,r.wF)((()=>{s()})),()=>{i.dataSource&&i.dataSource.initData(this,n.$refs.tableRef)}),c=({})=>({height:"35px",borderColor:"rgba(192, 192, 192,.5)",fontSize:"15px"}),u=e=>e.id,g=e=>{i.dataSource.currentPageChange(e,this,n.$refs.tableRef,!0)};return a({clearSelection:()=>{n.$refs.tableRef.clearSelection()}}),(a,i)=>{const s=(0,r.up)("el-table-column"),p=(0,r.up)("el-button");var h=(0,r.up)("el-table"),f=(0,r.up)("el-pagination"),y=(0,r.Q2)("loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",o,[(0,r.wy)(((0,r.wg)(),(0,r.j4)(h,{ref:"tableRef",class:"table-class","highlight-current-row":"",fix:"",border:"",stripe:"",style:{width:"100%"},data:e.dataSource.tableData,"row-style":c,"cell-style":{padding:"0",borderColor:"rgba(192, 192, 192,.5)"},"row-key":u,"header-cell-style":{background:"#f3f3f3",color:"#000",borderColor:"rgba(192, 192, 192,.5)",fontWeight:"800",fontSize:"15px"},"header-row-style":{borderColor:"rgba(192, 192, 192,.5)"},onSelectionChange:i[0]||(i[0]=a=>e.dataSource.selectionChange(a,e.dataSource))},{default:(0,r.w5)((()=>[e.useCheckBox?((0,r.wg)(),(0,r.j4)(s,{key:0,type:"selection",width:"55",align:"center",fixed:"left"})):(0,r.kq)("",!0),(0,r.WI)(a.$slots,"customColumn"),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.dataSource.tableHeader,(a=>((0,r.wg)(),(0,r.j4)(s,{key:a.key,fixed:a.isFixed,label:a.title,width:a.width,prop:a.key,formatter:e.dataSource.forMatData,align:"center","show-overflow-tooltip":""},null,8,["fixed","label","width","prop","formatter"])))),128)),(0,r.WI)(a.$slots,"customColumnEnd"),e.useEdit||e.useDelete?((0,r.wg)(),(0,r.j4)(s,{key:1,label:"操作",align:"center",width:200},{default:(0,r.w5)((a=>[e.useEdit?((0,r.wg)(),(0,r.j4)(p,{key:0,title:"编辑",type:"primary",icon:"Edit",text:"",style:{padding:"0",margin:"0",background:"transparent","margin-right":"30px"},class:"hover-animation",size:"small",onClick:e=>{var r,l;r=a.$index,l=a.row,t("handleEdit",{idx:r,row:l})}},null,8,["onClick"])):(0,r.kq)("",!0),e.useDelete?((0,r.wg)(),(0,r.j4)(p,{key:1,class:"hover-animation",title:"编辑",type:"danger",icon:"Delete",text:"",style:{padding:"0",margin:"0",background:"transparent"},size:"small",onClick:e=>{var r,l;r=a.$index,l=a.row,t("handleDelete",{idx:r,row:l})}},null,8,["onClick"])):(0,r.kq)("",!0)])),_:1})):(0,r.kq)("",!0)])),_:3},8,["data","cell-style","header-cell-style","header-row-style"])),[[y,e.loading]])]),e.usePagination?((0,r.wg)(),(0,r.iD)("div",d,[(0,r.Wm)(f,{"current-page":e.dataSource.currentPage,"onUpdate:currentPage":i[1]||(i[1]=a=>e.dataSource.currentPage=a),"page-size":e.dataSource.pageSize,"onUpdate:pageSize":i[2]||(i[2]=a=>e.dataSource.pageSize=a),small:"",background:"","default-current-page":1,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,50,100,500],total:e.dataSource.total,onSizeChange:i[3]||(i[3]=a=>e.dataSource.pageSizeChange(a,e.dataSource,(0,l.SU)(n).$refs.tableRef)),onCurrentChange:g},null,8,["current-page","page-size","total"])])):(0,r.kq)("",!0)],64)}}};var i=(0,t(40089).Z)(a,[["__scopeId","data-v-c9c224d8"]])}}]);