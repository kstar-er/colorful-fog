"use strict";(self.webpackChunksystem=self.webpackChunksystem||[]).push([[7598],{17598:function(e,l,a){a.r(l),a.d(l,{default:function(){return x}}),a(57658);var s=a(73396),r=a(44870),o=a(49242),t=a(87139),d=a(22483),n=a(31033);l=e=>((0,s.dD)("data-v-3b80fcb3"),e=e(),(0,s.Cn)(),e);const m={class:"background"},u=l((()=>(0,s._)("h1",{class:"mt100 mb60",style:{textShadow:"6px 1px 3px #fff",color:"#4d4d4d"}},null,-1))),i={class:"login-box"},p=l((()=>(0,s._)("h2",{style:{textShadow:"6px 2px 3px rgb(110, 110, 110)",color:"#4d4d4d"}}," 欢  迎  回   来 ",-1))),c=l((()=>(0,s._)("h3",null," 财务系统 ",-1))),g={class:"form_area"},w={style:{width:"100%","text-align":"center"}},h={class:"jx-dialog-header"},b=["id"],f={style:{"margin-right":"20px"}},_={style:{width:"100%","text-align":"center"}},v={style:{width:"100%","text-align":"center"}};l={__name:"login",setup(e){const l=(0,d.tv)(),a=(0,s.FN)()["proxy"];let x=(0,r.qj)({userName:"",password:""});(0,s.bv)((()=>{x.userName="",x.password="",localStorage.removeItem("client-header-store")}));const y=(0,r.iH)(!1),k=async()=>{if(a.$refs.psw?.blur(),a.$refs.name?.blur(),0===x.userName.length||0===x.password.length)a.$message.error("请填写账号密码");else{var e={password:x.password,username:x.userName};e=await(0,n.n$)(e);if(200===e.code){if(sessionStorage.setItem("token",e.data.access_token),e=await(0,n.bG)(),200===e.code){sessionStorage.setItem("userInfo",JSON.stringify(e.data)),a.$message.success("登录成功");let s=JSON.parse(sessionStorage.getItem("routerTabs")),r=JSON.parse(sessionStorage.getItem("activeIndex"));s&&s[r]?setTimeout((()=>{l.push(s[r].path)}),0):setTimeout((()=>{l.push("/index")}),0)}}else y.value=!0}},W=(0,r.iH)(!1),V=(0,r.qj)([{label:"手机号",prop:"phone",placeholder:"请输入手机号"},{label:"昵称",prop:"nickName",placeholder:"请输入昵称"},{label:"密码",prop:"password",placeholder:"请输入密码",showPassword:!0,maxlength:16},{label:"确认密码",prop:"confirmPassword",placeholder:"请输入确认密码",showPassword:!0,maxlength:16}]),N=(0,r.qj)({phone:"",nickName:"",password:"",confirmPassword:"",code:""}),S=(0,r.qj)({phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:1,max:10,message:"昵称的长度在1-10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码的长度在6-16位之间",trigger:"blur"}],confirmPassword:[{required:!0,message:"请输入确认密码",trigger:"blur"},{min:6,max:16,message:"密码的长度在6-16位之间",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}),U=(0,r.iH)(null),C=(0,s.Fl)((()=>N.password===N.confirmPassword)),q=()=>{U.value.validate((e=>!!e&&(C.value?(x.userName=N.nickName,x.password=N.password,N.phone="",N.nickName="",N.password="",N.confirmPassword="",N.code="",a.$message.success("注册成功"),void(W.value=!1)):(a.$message.error("确认密码输入错误"),!1))))},I=()=>{};return(e,l)=>{const a=(0,s.up)("el-input"),d=(0,s.up)("el-form-item"),y=(0,s.up)("el-button"),C=(0,s.up)("el-form");var P=(0,s.up)("el-dialog"),$=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.iD)("div",m,[u,(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",i,[p,c,(0,s._)("div",g,[(0,s.Wm)(C,{"label-width":"0px",model:(0,r.SU)(x)},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{label:""},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{ref:"name",modelValue:(0,r.SU)(x).userName,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,r.SU)(x).userName=e),clearable:"",placeholder:"请输入账号",onKeyup:(0,o.D2)(k,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,s.Wm)(d,{label:""},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{ref:"psw",modelValue:(0,r.SU)(x).password,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,r.SU)(x).password=e),type:"passworld",clearable:"","show-password":"",placeholder:"请输入密码",onKeyup:(0,o.D2)(k,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,s.Wm)(d,{"label-width":"12px"},{default:(0,s.w5)((()=>[(0,s._)("div",w,[(0,s.Wm)(y,{class:"logn-btn",type:"primary",onClick:k},{default:(0,s.w5)((()=>[(0,s.Uk)(" 登       录 ")])),_:1})]),(0,s.kq)("",!0)])),_:1})])),_:1},8,["model"])])])),[[$,(0,r.SU)(n.V_)]]),(0,s._)("div",null,[(0,s.Wm)(P,{modelValue:W.value,"onUpdate:modelValue":l[5]||(l[5]=e=>W.value=e),"show-close":!1,title:"请完善注册信息",width:"500",center:""},{header:(0,s.w5)((({titleId:e,titleClass:a})=>[(0,s._)("div",h,[(0,s._)("h4",{id:e,class:(0,t.C_)(a)}," 请完善注册信息 ",10,b),(0,s.Wm)(y,{class:"dialog-close-btn",type:"danger",icon:"CloseBold",circle:"",plain:"",onClick:l[2]||(l[2]=e=>W.value=!1)})])])),default:(0,s.w5)((()=>[(0,s.Wm)(C,{ref_key:"registerForm",ref:U,model:N,"label-width":"auto",rules:S},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(V,((e,l)=>((0,s.wg)(),(0,s.iD)("div",{key:l},[(0,s.Wm)(d,{label:e.label,prop:e.prop},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{modelValue:N[e.prop],"onUpdate:modelValue":l=>N[e.prop]=l,placeholder:e.placeholder,"show-password":e?.showPassword,maxlength:e?.maxlength,autocomplete:"new-password",clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder","show-password","maxlength"])])),_:2},1032,["label","prop"])])))),128)),(0,s.Wm)(d,{label:"验证码","inline-message":"true",prop:"code"},{default:(0,s.w5)((()=>[(0,s._)("span",f,[(0,s.Wm)(a,{modelValue:N.code,"onUpdate:modelValue":l[3]||(l[3]=e=>N.code=e),placeholder:"请输入验证码",width:"100px",size:"small",maxlength:"8",clearable:""},null,8,["modelValue"])]),(0,s.Wm)(y,{type:"primary",onClick:I},{default:(0,s.w5)((()=>[(0,s.Uk)(" 获取验证码 ")])),_:1})])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s._)("div",_,[(0,s.Wm)(y,{class:"logn-btn",type:"primary",onClick:q},{default:(0,s.w5)((()=>[(0,s.Uk)(" 确认注册并登录 ")])),_:1})]),(0,s._)("div",v,[(0,s.Wm)(y,{class:"logn-btn",type:"primary",onClick:l[4]||(l[4]=e=>W.value=!1)},{default:(0,s.w5)((()=>[(0,s.Uk)(" 取消 ")])),_:1})])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])])}}};var x=(0,a(40089).Z)(l,[["__scopeId","data-v-3b80fcb3"]])}}]);